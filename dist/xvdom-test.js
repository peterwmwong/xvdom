(function () {
	'use strict';

	var babelHelpers = {};
	babelHelpers.typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
	  return typeof obj;
	} : function (obj) {
	  return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
	};

	babelHelpers.extends = Object.assign || function (target) {
	  for (var i = 1; i < arguments.length; i++) {
	    var source = arguments[i];

	    for (var key in source) {
	      if (Object.prototype.hasOwnProperty.call(source, key)) {
	        target[key] = source[key];
	      }
	    }
	  }

	  return target;
	};

	babelHelpers.slicedToArray = function () {
	  function sliceIterator(arr, i) {
	    var _arr = [];
	    var _n = true;
	    var _d = false;
	    var _e = undefined;

	    try {
	      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
	        _arr.push(_s.value);

	        if (i && _arr.length === i) break;
	      }
	    } catch (err) {
	      _d = true;
	      _e = err;
	    } finally {
	      try {
	        if (!_n && _i["return"]) _i["return"]();
	      } finally {
	        if (_d) throw _e;
	      }
	    }

	    return _arr;
	  }

	  return function (arr, i) {
	    if (Array.isArray(arr)) {
	      return arr;
	    } else if (Symbol.iterator in Object(arr)) {
	      return sliceIterator(arr, i);
	    } else {
	      throw new TypeError("Invalid attempt to destructure non-iterable instance");
	    }
	  };
	}();

	babelHelpers;


	var __commonjs_global = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : this;
	function __commonjs(fn, module) { return module = { exports: {} }, fn(module, module.exports, __commonjs_global), module.exports; }

	var inherits_browser = __commonjs(function (module) {
	if(typeof Object.create==='function'){ // implementation from standard node.js 'util' module
	module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else { // old school shim for old browsers
	module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function TempCtor(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor();ctor.prototype.constructor=ctor;};}
	});

	var require$$0$1 = (inherits_browser && typeof inherits_browser === 'object' && 'default' in inherits_browser ? inherits_browser['default'] : inherits_browser);

	var isBufferBrowser = __commonjs(function (module) {
	module.exports=function isBuffer(arg){return arg&&(typeof arg==='undefined'?'undefined':babelHelpers.typeof(arg))==='object'&&typeof arg.copy==='function'&&typeof arg.fill==='function'&&typeof arg.readUInt8==='function';};
	});

	var require$$1 = (isBufferBrowser && typeof isBufferBrowser === 'object' && 'default' in isBufferBrowser ? isBufferBrowser['default'] : isBufferBrowser);

	var util = __commonjs(function (module, exports, global) {
	// Copyright Joyent, Inc. and other Node contributors.
	//
	// Permission is hereby granted, free of charge, to any person obtaining a
	// copy of this software and associated documentation files (the
	// "Software"), to deal in the Software without restriction, including
	// without limitation the rights to use, copy, modify, merge, publish,
	// distribute, sublicense, and/or sell copies of the Software, and to permit
	// persons to whom the Software is furnished to do so, subject to the
	// following conditions:
	//
	// The above copyright notice and this permission notice shall be included
	// in all copies or substantial portions of the Software.
	//
	// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
	// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
	// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
	// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
	// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
	// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
	// USE OR OTHER DEALINGS IN THE SOFTWARE.
	var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]));}return objects.join(' ');}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==='%%')return '%';if(i>=len)return x;switch(x){case '%s':return String(args[i++]);case '%d':return Number(args[i++]);case '%j':try{return JSON.stringify(args[i++]);}catch(_){return '[Circular]';}default:return x;}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=' '+x;}else {str+=' '+inspect(x);}}return str;}; // Mark that a method should not be used.
	// Returns a modified function which warns once by default.
	// If --no-deprecation is set, then it is a no-op.
	exports.deprecate=function(fn,msg){ // Allow for deprecating things in the process of starting up.
	if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments);};}if(process.noDeprecation===true){return fn;}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg);}else if(process.traceDeprecation){console.trace(msg);}else {console.error(msg);}warned=true;}return fn.apply(this,arguments);}return deprecated;};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||'';set=set.toUpperCase();if(!debugs[set]){if(new RegExp('\\b'+set+'\\b','i').test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error('%s %d: %s',set,pid,msg);};}else {debugs[set]=function(){};}}return debugs[set];}; /**
	 * Echos the value of a value. Trys to print the value out
	 * in the best way possible given the different types.
	 *
	 * @param {Object} obj The object to print out.
	 * @param {Object} opts Optional options object that alters the output.
	 */ /* legacy: obj, showHidden, depth, colors*/function inspect(obj,opts){ // default options
	var ctx={seen:[],stylize:stylizeNoColor}; // legacy...
	if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ // legacy...
	ctx.showHidden=opts;}else if(opts){ // got an "options" object
	exports._extend(ctx,opts);} // set default options
	if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth);}exports.inspect=inspect; // http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
	inspect.colors={'bold':[1,22],'italic':[3,23],'underline':[4,24],'inverse':[7,27],'white':[37,39],'grey':[90,39],'black':[30,39],'blue':[34,39],'cyan':[36,39],'green':[32,39],'magenta':[35,39],'red':[31,39],'yellow':[33,39]}; // Don't use 'blue' not visible on cmd.exe
	inspect.styles={'special':'cyan','number':'yellow','boolean':'yellow','undefined':'grey','null':'bold','string':'green','date':'magenta', // "name": intentionally not styling
	'regexp':'red'};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return '\u001b['+inspect.colors[style][0]+'m'+str+'\u001b['+inspect.colors[style][1]+'m';}else {return str;}}function stylizeNoColor(str,styleType){return str;}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true;});return hash;}function formatValue(ctx,value,recurseTimes){ // Provide a hook for user-specified inspect functions.
	// Check that value is an object with an inspect function on it
	if(ctx.customInspect&&value&&isFunction(value.inspect)&& // Filter out the util module, it's inspect function is special
	value.inspect!==exports.inspect&& // Also filter out any prototype objects using the circular check.
	!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes);}return ret;} // Primitive types cannot have properties
	var primitive=formatPrimitive(ctx,value);if(primitive){return primitive;} // Look up the keys of the object.
	var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value);} // IE doesn't make error fields non-enumerable
	// http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
	if(isError(value)&&(keys.indexOf('message')>=0||keys.indexOf('description')>=0)){return formatError(value);} // Some type of object without properties can be shortcutted.
	if(keys.length===0){if(isFunction(value)){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special');}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),'date');}if(isError(value)){return formatError(value);}}var base='',array=false,braces=['{','}']; // Make Array say that they are Array
	if(isArray(value)){array=true;braces=['[',']'];} // Make functions say that they are functions
	if(isFunction(value)){var n=value.name?': '+value.name:'';base=' [Function'+n+']';} // Make RegExps say that they are RegExps
	if(isRegExp(value)){base=' '+RegExp.prototype.toString.call(value);} // Make dates with properties first say the date
	if(isDate(value)){base=' '+Date.prototype.toUTCString.call(value);} // Make error with message first say the error
	if(isError(value)){base=' '+formatError(value);}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1];}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}else {return ctx.stylize('[Object]','special');}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys);}else {output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);});}ctx.seen.pop();return reduceToSingleString(output,base,braces);}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize('undefined','undefined');if(isString(value)){var simple='\''+JSON.stringify(value).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+'\'';return ctx.stylize(simple,'string');}if(isNumber(value))return ctx.stylize(''+value,'number');if(isBoolean(value))return ctx.stylize(''+value,'boolean'); // For some reason typeof null is "object", so special case here.
	if(isNull(value))return ctx.stylize('null','null');}function formatError(value){return '['+Error.prototype.toString.call(value)+']';}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));}else {output.push('');}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true));}});return output;}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize('[Getter/Setter]','special');}else {str=ctx.stylize('[Getter]','special');}}else {if(desc.set){str=ctx.stylize('[Setter]','special');}}if(!hasOwnProperty(visibleKeys,key)){name='['+key+']';}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null);}else {str=formatValue(ctx,desc.value,recurseTimes-1);}if(str.indexOf('\n')>-1){if(array){str=str.split('\n').map(function(line){return '  '+line;}).join('\n').substr(2);}else {str='\n'+str.split('\n').map(function(line){return '   '+line;}).join('\n');}}}else {str=ctx.stylize('[Circular]','special');}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str;}name=JSON.stringify(''+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,'name');}else {name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,'string');}}return name+': '+str;}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf('\n')>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,'').length+1;},0);if(length>60){return braces[0]+(base===''?'':base+'\n ')+' '+output.join(',\n  ')+' '+braces[1];}return braces[0]+base+' '+output.join(', ')+' '+braces[1];} // NOTE: These type checking functions intentionally don't use `instanceof`
	// because it is fragile and can be easily faked with `Object.create()`.
	function isArray(ar){return Array.isArray(ar);}exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}exports.isString=isString;function isSymbol(arg){return (typeof arg==='undefined'?'undefined':babelHelpers.typeof(arg))==='symbol';}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]';}exports.isRegExp=isRegExp;function isObject(arg){return (typeof arg==='undefined'?'undefined':babelHelpers.typeof(arg))==='object'&&arg!==null;}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]';}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error);}exports.isError=isError;function isFunction(arg){return typeof arg==='function';}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||(typeof arg==='undefined'?'undefined':babelHelpers.typeof(arg))==='symbol'|| // ES6 symbol
	typeof arg==='undefined';}exports.isPrimitive=isPrimitive;exports.isBuffer=require$$1;function objectToString(o){return Object.prototype.toString.call(o);}function pad(n){return n<10?'0'+n.toString(10):n.toString(10);}var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']; // 26 Feb 16:19:34
	function timestamp(){var d=new Date();var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(':');return [d.getDate(),months[d.getMonth()],time].join(' ');} // log is just a thin wrapper to console.log that prepends a timestamp
	exports.log=function(){console.log('%s - %s',timestamp(),exports.format.apply(exports,arguments));}; /**
	 * Inherit the prototype methods from one constructor into another.
	 *
	 * The Function.prototype.inherits from lang.js rewritten as a standalone
	 * function (not on Function.prototype). NOTE: If this file is to be loaded
	 * during bootstrapping this function needs to be rewritten using some native
	 * functions as prototype setup using normal JavaScript does not work as
	 * expected during bootstrapping (see mirror.js in r114903).
	 *
	 * @param {function} ctor Constructor function which needs to inherit the
	 *     prototype.
	 * @param {function} superCtor Constructor function to inherit prototype from.
	 */exports.inherits=require$$0$1;exports._extend=function(origin,add){ // Don't do anything if add isn't an object
	if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]];}return origin;};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}
	});

	var require$$0 = (util && typeof util === 'object' && 'default' in util ? util['default'] : util);

	var assert = __commonjs(function (module) {
	// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
	//
	// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
	//
	// Originally from narwhal.js (http://narwhaljs.org)
	// Copyright (c) 2009 Thomas Robinson <280north.com>
	//
	// Permission is hereby granted, free of charge, to any person obtaining a copy
	// of this software and associated documentation files (the 'Software'), to
	// deal in the Software without restriction, including without limitation the
	// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
	// sell copies of the Software, and to permit persons to whom the Software is
	// furnished to do so, subject to the following conditions:
	//
	// The above copyright notice and this permission notice shall be included in
	// all copies or substantial portions of the Software.
	//
	// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
	// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
	// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
	// when used in node, this will actually load the util module we depend on
	// versus loading the builtin util module as happens otherwise
	// this is a bug in node module loading as far as I am concerned
	var util=require$$0;var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty; // 1. The assert module provides functions that throw
	// AssertionError's when particular conditions are not met. The
	// assert module must conform to the following interface.
	var assert=module.exports=ok; // 2. The AssertionError is defined in assert.
	// new assert.AssertionError({ message: message,
	//                             actual: actual,
	//                             expected: expected })
	assert.AssertionError=function AssertionError(options){this.name='AssertionError';this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false;}else {this.message=getMessage(this);this.generatedMessage=true;}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction);}else { // non v8 browsers so we can have a stacktrace
	var err=new Error();if(err.stack){var out=err.stack; // try to strip useless frames
	var fn_name=stackStartFunction.name;var idx=out.indexOf('\n'+fn_name);if(idx>=0){ // once we have located the function frame
	// we need to strip out everything before it (and its line)
	var next_line=out.indexOf('\n',idx+1);out=out.substring(next_line+1);}this.stack=out;}}}; // assert.AssertionError instanceof Error
	util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return ''+value;}if(util.isNumber(value)&&!isFinite(value)){return value.toString();}if(util.isFunction(value)||util.isRegExp(value)){return value.toString();}return value;}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n);}else {return s;}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+' '+self.operator+' '+truncate(JSON.stringify(self.expected,replacer),128);} // At present only the three keys mentioned above are used and
	// understood by the spec. Implementations or sub modules can pass
	// other keys to the AssertionError's constructor - they will be
	// ignored.
	// 3. All of the following functions must throw an AssertionError
	// when a corresponding condition is not met, with a message that
	// may be undefined if not provided.  All assertion methods provide
	// both the actual and expected values to the assertion error for
	// display purposes.
	function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction});} // EXTENSION! allows for well behaved errors defined elsewhere.
	assert.fail=fail; // 4. Pure assertion tests whether a value is truthy, as determined
	// by !!guard.
	// assert.ok(guard, message_opt);
	// This statement is equivalent to assert.equal(true, !!guard,
	// message_opt);. To test strictly for the value true, use
	// assert.strictEqual(true, guard, message_opt);.
	function ok(value,message){if(!value)fail(value,true,message,'==',assert.ok);}assert.ok=ok; // 5. The equality assertion tests shallow, coercive equality with
	// ==.
	// assert.equal(actual, expected, message_opt);
	assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,'==',assert.equal);}; // 6. The non-equality assertion tests for whether two objects are not equal
	// with != assert.notEqual(actual, expected, message_opt);
	assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,'!=',assert.notEqual);}}; // 7. The equivalence assertion tests a deep equality relation.
	// assert.deepEqual(actual, expected, message_opt);
	assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,'deepEqual',assert.deepEqual);}};function _deepEqual(actual,expected){ // 7.1. All identical values are equivalent, as determined by ===.
	if(actual===expected){return true;}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false;}return true; // 7.2. If the expected value is a Date object, the actual value is
	// equivalent if it is also a Date object that refers to the same time.
	}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime(); // 7.3 If the expected value is a RegExp object, the actual value is
	// equivalent if it is also a RegExp object with the same source and
	// properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
	}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase; // 7.4. Other pairs that do not both pass typeof value == 'object',
	// equivalence is determined by ==.
	}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected; // 7.5 For all other Object pairs, including Array objects, equivalence is
	// determined by having the same number of owned properties (as verified
	// with Object.prototype.hasOwnProperty.call), the same set of keys
	// (although not necessarily the same order), equivalent values for every
	// corresponding key, and an identical 'prototype' property. Note: this
	// accounts for both named and indexed properties on Arrays.
	}else {return objEquiv(actual,expected);}}function isArguments(object){return Object.prototype.toString.call(object)=='[object Arguments]';}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false; // an identical 'prototype' property.
	if(a.prototype!==b.prototype)return false; // if one is a primitive, the other must be same
	if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b;}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b);}var ka=objectKeys(a),kb=objectKeys(b),key,i; // having the same number of owned properties (keys incorporates
	// hasOwnProperty)
	if(ka.length!=kb.length)return false; //the same set of keys (although not necessarily the same order),
	ka.sort();kb.sort(); //~~~cheap key test
	for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false;} //equivalent values for every corresponding key, and
	//~~~possibly expensive deep test
	for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false;}return true;} // 8. The non-equivalence assertion tests for any deep inequality.
	// assert.notDeepEqual(actual, expected, message_opt);
	assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,'notDeepEqual',assert.notDeepEqual);}}; // 9. The strict equality assertion tests strict equality, as determined by ===.
	// assert.strictEqual(actual, expected, message_opt);
	assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,'===',assert.strictEqual);}}; // 10. The strict non-equality assertion tests for strict inequality, as
	// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);
	assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,'!==',assert.notStrictEqual);}};function expectedException(actual,expected){if(!actual||!expected){return false;}if(Object.prototype.toString.call(expected)=='[object RegExp]'){return expected.test(actual);}else if(actual instanceof expected){return true;}else if(expected.call({},actual)===true){return true;}return false;}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null;}try{block();}catch(e){actual=e;}message=(expected&&expected.name?' ('+expected.name+').':'.')+(message?' '+message:'.');if(shouldThrow&&!actual){fail(actual,expected,'Missing expected exception'+message);}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,'Got unwanted exception'+message);}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual;}} // 11. Expected to throw an error:
	// assert.throws(block, Error_opt, message_opt);
	assert.throws=function(block, /*optional*/error, /*optional*/message){_throws.apply(this,[true].concat(pSlice.call(arguments)));}; // EXTENSION! This is annoying to write outside this module.
	assert.doesNotThrow=function(block, /*optional*/message){_throws.apply(this,[false].concat(pSlice.call(arguments)));};assert.ifError=function(err){if(err){throw err;}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key);}return keys;};
	});

	var assert$1 = (assert && typeof assert === 'object' && 'default' in assert ? assert['default'] : assert);

	var stringify$1 = __commonjs(function (module) {
	function attrString(attrs){var buff=[];for(var key in attrs){buff.push(key+'="'+attrs[key]+'"');}if(!buff.length){return '';}return ' '+buff.join(' ');}function stringify(buff,doc){switch(doc.type){case 'text':return buff+doc.content;case 'tag':buff+='<'+doc.name+(doc.attrs?attrString(doc.attrs):'')+(doc.voidElement?'/>':'>');if(doc.voidElement){return buff;}return buff+doc.children.reduce(stringify,'')+'</'+doc.name+'>';}}module.exports=function(doc){return doc.reduce(function(token,rootEl){return token+stringify('',rootEl);},'');};
	});

	var require$$0$2 = (stringify$1 && typeof stringify$1 === 'object' && 'default' in stringify$1 ? stringify$1['default'] : stringify$1);

	var parseTag = __commonjs(function (module) {
	var attrRE=/([\w-]+)|['"]{1}([^'"]*)['"]{1}/g; // create optimized lookup object for
	// void elements as listed here: 
	// http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements
	var lookup=Object.create?Object.create(null):{};lookup.area=true;lookup.base=true;lookup.br=true;lookup.col=true;lookup.embed=true;lookup.hr=true;lookup.img=true;lookup.input=true;lookup.keygen=true;lookup.link=true;lookup.menuitem=true;lookup.meta=true;lookup.param=true;lookup.source=true;lookup.track=true;lookup.wbr=true;module.exports=function(tag){var i=0;var key;var res={type:'tag',name:'',voidElement:false,attrs:{},children:[]};tag.replace(attrRE,function(match){if(i%2){key=match;}else {if(i===0){if(lookup[match]||tag.charAt(tag.length-2)==='/'){res.voidElement=true;}res.name=match;}else {res.attrs[key]=match.replace(/['"]/g,'');}}i++;});return res;};
	});

	var require$$0$3 = (parseTag && typeof parseTag === 'object' && 'default' in parseTag ? parseTag['default'] : parseTag);

	var parse$1 = __commonjs(function (module) {
	/*jshint -W030 */var tagRE=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g;var parseTag=require$$0$3; // re-used obj for quick lookups of components
	var empty=Object.create?Object.create(null):{};module.exports=function parse(html,options){options||(options={});options.components||(options.components=empty);var result=[];var current;var level=-1;var arr=[];var byTag={};var inComponent=false;html.replace(tagRE,function(tag,index){if(inComponent){if(tag!=='</'+current.name+'>'){return;}else {inComponent=false;}}var isOpen=tag.charAt(1)!=='/';var start=index+tag.length;var nextChar=html.charAt(start);var parent;if(isOpen){level++;current=parseTag(tag);if(current.type==='tag'&&options.components[current.name]){current.type='component';inComponent=true;}if(!current.voidElement&&!inComponent&&nextChar&&nextChar!=='<'){current.children.push({type:'text',content:html.slice(start,html.indexOf('<',start))});}byTag[current.tagName]=current; // if we're at root, push new base node
	if(level===0){result.push(current);}parent=arr[level-1];if(parent){parent.children.push(current);}arr[level]=current;}if(!isOpen||current.voidElement){level--;if(!inComponent&&nextChar!=='<'&&nextChar){ // trailing text node
	arr[level].children.push({type:'text',content:html.slice(start,html.indexOf('<',start))});}}});return result;};
	});

	var require$$1$1 = (parse$1 && typeof parse$1 === 'object' && 'default' in parse$1 ? parse$1['default'] : parse$1);

	var index = __commonjs(function (module) {
	module.exports={parse:require$$1$1,stringify:require$$0$2};
	});

	var HTML = (index && typeof index === 'object' && 'default' in index ? index['default'] : index);

	// WORKAROUND: html-parse-stringify's parser incorrectly parses comment nodes.
	var tempReinsertCommentNodes=function tempReinsertCommentNodes(html){return html.replace(/<comment\/>/g,'<!---->');};var tempReplaceCommentNodes=function tempReplaceCommentNodes(html){return html.replace(/<!---->/g,'<comment/>');};function getHTMLString(node){return tempReinsertCommentNodes(HTML.stringify(HTML.parse(tempReplaceCommentNodes(node.outerHTML))));}

	/*

	Instance properties:

	$a - actions for stateful components
	$c - component for stateful components
	$n = DOM node
	$p - props for components
	$s - spec (see below)
	$t - state for stateful components
	$x - Pool linked list next pointer

	Spec properties:

	c - create (or render)
	u - update (or update)
	r - keyed map of unmounted instanced that can be recycled

	*/var PRE_INSTANCE={$p:null};var MARKER_NODE=document.createComment('');var DEADPOOL={push:function push(){},pop:function pop(){}};var Pool=function Pool(){var map=new Map();return {push:function push(instance){var key=instance.key;instance.$x=map.get(key);map.set(key,instance);},pop:function pop(key){var head=map.get(key);if(head){map.set(key,head.$x);return head;}}};};var recycle=function recycle(instance){instance.$s.r.push(instance);};var getMarkerNode=function getMarkerNode(){return MARKER_NODE.cloneNode(false);};var replaceNode=function replaceNode(oldNode,newNode){var parentNode=oldNode.parentNode;if(parentNode)parentNode.replaceChild(newNode,oldNode);};var insertBefore=function insertBefore(parentNode,node,beforeNode){return beforeNode?parentNode.insertBefore(node,beforeNode):parentNode.appendChild(node);};var unmountInstance=function unmountInstance(inst,parentNode){recycle(inst);parentNode.removeChild(inst.$n);};var removeArrayNodes=function removeArrayNodes(array,parentNode){var length=array.length;var i=0;while(i<length){unmountInstance(array[i++],parentNode);}};var removeArrayNodesOnlyChild=function removeArrayNodesOnlyChild(array,parentNode){var length=array.length;var i=0;while(i<length){recycle(array[i++]);}parentNode.textContent='';};var internalRerenderInstance=function internalRerenderInstance(inst,prevInst){return prevInst.$s===inst.$s&&(inst.$s.u(inst,prevInst),true);};var internalRerenderStatefulComponent=function internalRerenderStatefulComponent(stateActions,inst,prevInst,parentInst,componentInstanceProp){if(!internalRerenderInstance(inst,prevInst)){var newNode=render(inst);var node=parentInst.$n;inst.$c=prevInst.$c;inst.$t=prevInst.$t;inst.$p=prevInst.$p;inst.$a=stateActions;parentInst.$n=newNode;parentInst[componentInstanceProp]=inst;stateActions.$$instance=inst;newNode.xvdom=parentInst;replaceNode(node,newNode);recycle(inst);}};var callAction=function callAction(stateActions,action,parentInst,componentInstanceProp,args){var inst=stateActions.$$instance;var props=inst.$p;var state=inst.$t;var shouldRerender=stateActions.$$doRerender;stateActions.$$doRerender=false;var newState=action.apply(undefined,[props,state,stateActions].concat(args));stateActions.$$doRerender=shouldRerender;inst.$t=newState;if(state!==newState&&shouldRerender){internalRerenderStatefulComponent(stateActions,inst.$c(props,newState,stateActions),inst,parentInst,componentInstanceProp);}return newState;};var createAction=function createAction(stateActions,action,parentInst,componentInstanceProp){return function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return callAction(stateActions,action,parentInst,componentInstanceProp,args);};};var createStateActions=function createStateActions(rawActions,parentInst,componentInstanceProp){var stateActions={$$doRerender:false,$$instance:PRE_INSTANCE};for(var sa in rawActions){stateActions[sa]=createAction(stateActions,rawActions[sa],parentInst,componentInstanceProp);}return stateActions;};var renderArrayToParentBefore=function renderArrayToParentBefore(parentNode,array,length,markerNode){var i=0;while(i<length){insertBefore(parentNode,(array[i]=internalRender(array[i])).$n,markerNode);++i;}};var renderArrayToParent=function renderArrayToParent(parentNode,array,length){var i=0;while(i<length){parentNode.appendChild((array[i]=internalRender(array[i])).$n);++i;}};var rerenderArray_reconcileWithMap=function rerenderArray_reconcileWithMap(parentNode,array,oldArray,startIndex,endIndex,oldStartItem,oldStartIndex,oldEndItem,oldEndIndex){var oldListNodeKeyMap=new Map();var insertBeforeNode=oldEndItem.$n;var item=void 0,key=void 0,startItem=void 0;while(oldStartIndex<=oldEndIndex){item=oldArray[oldStartIndex++];oldListNodeKeyMap.set(item.key,item);}while(startIndex<=endIndex){startItem=array[startIndex];key=startItem.key;item=oldListNodeKeyMap.get(key);if(item){if(item===oldEndItem)insertBeforeNode=insertBeforeNode.nextSibling;oldListNodeKeyMap.delete(key);startItem=internalRerender(item,startItem);}else {startItem=internalRender(startItem);}array[startIndex]=startItem;insertBefore(parentNode,startItem.$n,insertBeforeNode);++startIndex;}oldListNodeKeyMap.forEach(function(value){unmountInstance(value,parentNode);});};var rerenderArray_afterReconcile=function rerenderArray_afterReconcile(parentNode,array,oldArray,startIndex,startItem,endIndex,endItem,oldStartIndex,oldStartItem,oldEndIndex,oldEndItem,insertBeforeNode){if(oldStartIndex>oldEndIndex){while(startIndex<=endIndex){startItem=array[startIndex];insertBefore(parentNode,(array[startIndex]=internalRender(startItem)).$n,insertBeforeNode);++startIndex;}}else if(startIndex>endIndex){while(oldStartIndex<=oldEndIndex){unmountInstance(oldArray[oldStartIndex++],parentNode);}}else {rerenderArray_reconcileWithMap(parentNode,array,oldArray,startIndex,endIndex,oldStartItem,oldStartIndex,oldEndItem,oldEndIndex);}};var rerenderArray_reconcile=function rerenderArray_reconcile(parentNode,array,length,oldArray,oldLength,markerNode){var oldStartIndex=0;var startIndex=0;var successful=true;var endIndex=length-1;var oldEndIndex=oldLength-1;var startItem=0!==length&&array[0];var oldStartItem=0!==oldLength&&oldArray[0];var insertBeforeNode=markerNode;var oldEndItem=void 0,endItem=void 0,node=void 0;outer: while(successful&&oldStartIndex<=oldEndIndex&&startIndex<=endIndex){successful=false;while(oldStartItem.key===startItem.key){array[startIndex]=internalRerender(oldStartItem,startItem);oldStartIndex++;startIndex++;if(oldStartIndex>oldEndIndex||startIndex>endIndex){break outer;}else {oldStartItem=oldArray[oldStartIndex];startItem=array[startIndex];successful=true;}}oldEndItem=oldArray[oldEndIndex];endItem=array[endIndex];while(oldEndItem.key===endItem.key){insertBeforeNode=(array[endIndex]=internalRerender(oldEndItem,endItem)).$n;oldEndIndex--;endIndex--;if(oldStartIndex>oldEndIndex||startIndex>endIndex){break outer;}else {oldEndItem=oldArray[oldEndIndex];endItem=array[endIndex];successful=true;}}while(oldStartItem.key===endItem.key){node=(array[endIndex]=internalRerender(oldStartItem,endItem)).$n;if(oldEndItem.key!==endItem.key){insertBeforeNode=insertBefore(parentNode,node,insertBeforeNode);}oldStartIndex++;endIndex--;if(oldStartIndex>oldEndIndex||startIndex>endIndex){break outer;}else {oldStartItem=oldArray[oldStartIndex];endItem=array[endIndex];successful=true;}}while(oldEndItem.key===startItem.key){insertBefore(parentNode,(array[startIndex]=internalRerender(oldEndItem,startItem)).$n,oldStartItem.$n);oldEndIndex--;startIndex++;if(oldStartIndex>oldEndIndex||startIndex>endIndex){break outer;}else {oldEndItem=oldArray[oldEndIndex];startItem=array[startIndex];successful=true;}}}if(startIndex<=endIndex||oldStartIndex<=oldEndIndex){rerenderArray_afterReconcile(parentNode,array,oldArray,startIndex,startItem,endIndex,endItem,oldStartIndex,oldStartItem,oldEndIndex,oldEndItem,insertBeforeNode);}};var rerenderArray=function rerenderArray(markerNode,array,oldArray){var parentNode=markerNode.parentNode;var length=array.length;var oldLength=oldArray.length;if(!length){removeArrayNodes(oldArray,parentNode);}else if(!oldLength){renderArrayToParentBefore(parentNode,array,length,markerNode);}else {rerenderArray_reconcile(parentNode,array,length,oldArray,oldLength,markerNode);}};var rerenderArrayOnlyChild=function rerenderArrayOnlyChild(parentNode,array,oldArray){var length=array.length;var oldLength=oldArray.length;if(!length){removeArrayNodesOnlyChild(oldArray,parentNode);}else if(!oldLength){renderArrayToParent(parentNode,array,length);}else {rerenderArray_reconcile(parentNode,array,length,oldArray,oldLength,null);}};var rerenderText=function rerenderText(isOnlyChild,value,oldValue,contextNode,instance,rerenderFuncProp,rerenderContextNode){if(value==null){contextNode.nodeValue='';}else if(value.constructor===String||value.constructor===Number){contextNode.nodeValue=value;}else {rerenderDynamic(isOnlyChild,value,null,contextNode,instance,rerenderFuncProp,rerenderContextNode);}return value;};var rerenderDynamic=function rerenderDynamic(isOnlyChild,value,oldValue,contextNode,instance,rerenderFuncProp,rerenderContextNode){replaceNode(contextNode,createDynamic(isOnlyChild,contextNode.parentNode,value,instance,rerenderFuncProp,rerenderContextNode));return value;};var rerenderInstance=function rerenderInstance(isOnlyChild,value,prevValue,node,instance,rerenderFuncProp,rerenderContextNode){if(value&&internalRerenderInstance(value,prevValue))return prevValue;return rerenderDynamic(isOnlyChild,value,null,node,instance,rerenderFuncProp,rerenderContextNode);};var rerenderStatefulComponent=function rerenderStatefulComponent(component,props,prevProps,componentInstance,node,instance,rerenderContextNode,componentInstanceProp){var stateActions=componentInstance.$a;var onProps=stateActions.onProps;componentInstance.$p=props;if(onProps)onProps();else {internalRerenderStatefulComponent(stateActions,componentInstance.$c(props,componentInstance.$t,stateActions),componentInstance,instance,componentInstanceProp);}};var rerenderComponent=function rerenderComponent(component,props,prevProps,componentInstance,node,instance,rerenderContextNode,componentInstanceProp){var newCompInstance=component(props||{});if(!internalRerenderInstance(newCompInstance,componentInstance)){replaceNode(node,instance[rerenderContextNode]=(instance[componentInstanceProp]=internalRender(newCompInstance)).$n);}};var rerenderArrayMaybe=function rerenderArrayMaybe(isOnlyChild,array,oldArray,markerNode,valuesAndContext,rerenderFuncProp,rerenderContextNode){if(array instanceof Array){if(isOnlyChild){rerenderArrayOnlyChild(markerNode,array,oldArray);}else {rerenderArray(markerNode,array,oldArray);}}else {if(isOnlyChild){removeArrayNodesOnlyChild(oldArray,markerNode);markerNode.appendChild(createDynamic(true,markerNode,array,valuesAndContext,rerenderFuncProp,rerenderContextNode));}else {removeArrayNodes(oldArray,markerNode.parentNode);rerenderDynamic(false,array,null,markerNode,valuesAndContext,rerenderFuncProp,rerenderContextNode);}}return array;};var createStatefulComponent=function createStatefulComponent(component,props,instance,rerenderFuncProp,rerenderContextNode,componentInstanceProp){PRE_INSTANCE.$p=props;var rawActions=component.state;var actions=createStateActions(rawActions,instance,componentInstanceProp);var state=rawActions.onInit(props||{},undefined,actions);actions.$$doRerender=true;var inst=component(props,state,actions);var node=render(inst);actions.$$instance=inst;inst.$c=component;inst.$t=state;inst.$a=actions;inst.$p=props;instance[rerenderFuncProp]=rerenderStatefulComponent;instance[componentInstanceProp]=inst;instance[rerenderContextNode]=node;return node;};var createDynamic=function createDynamic(isOnlyChild,parentNode,value,instance,rerenderFuncProp,rerenderContextNode){var node=void 0,context=void 0,rerenderFunc=void 0;var valueConstructor=void 0;if(value==null||(valueConstructor=value.constructor)===Boolean){rerenderFunc=rerenderDynamic;context=node=getMarkerNode();}else if(valueConstructor===Object){rerenderFunc=rerenderInstance;context=node=render(value);}else if(valueConstructor===String||valueConstructor===Number){rerenderFunc=rerenderText;context=node=document.createTextNode(value);}else if(valueConstructor===Array){node=document.createDocumentFragment();renderArrayToParent(node,value,value.length);rerenderFunc=rerenderArrayMaybe;context=isOnlyChild?parentNode:node.appendChild(getMarkerNode());}instance[rerenderFuncProp]=rerenderFunc;instance[rerenderContextNode]=context;return node;};var createComponent=function createComponent(component,props,instance,rerenderFuncProp,rerenderContextNode,componentInstanceProp){if(component.state)return createStatefulComponent(component,props,instance,rerenderFuncProp,rerenderContextNode,componentInstanceProp);var inst=component(props||{});var node=render(inst);instance[rerenderFuncProp]=rerenderComponent;instance[componentInstanceProp]=inst;instance[rerenderContextNode]=node;return node;};var internalRender=function internalRender(instance){var spec=instance.$s;var recycledInstance=spec.r.pop(instance.key);if(recycledInstance){spec.u(instance,recycledInstance);return recycledInstance;}else {(instance.$n=spec.c(instance)).xvdom=instance;return instance;}};var render=function render(instance){return internalRender(instance).$n;};var internalRerender=function internalRerender(prevInstance,instance){if(internalRerenderInstance(instance,prevInstance))return prevInstance;instance=internalRender(instance);replaceNode(prevInstance.$n,instance.$n);recycle(prevInstance);return instance;};var rerender=function rerender(node,instance){return internalRerender(node.xvdom,instance).$n;};var unmount=function unmount(node){unmountInstance(node.xvdom,node.parentNode);};var xvdom = {DEADPOOL:DEADPOOL,Pool:Pool,rerenderText:rerenderText,rerenderDynamic:rerenderDynamic,rerenderInstance:rerenderInstance,rerenderArrayMaybe:rerenderArrayMaybe,createDynamic:createDynamic,createComponent:createComponent,render:render,rerender:rerender,unmount:unmount};

	var _xvdomSpec={c:function c(){var _n=document.createElement('span');return _n;},u:function u(){},r:xvdom.DEADPOOL};describe('render - instance',function(){var resultNode=void 0,instance=void 0;beforeEach(function(){instance={$s:_xvdomSpec};resultNode=xvdom.render(instance);});it('calls render() with values',function(){assert$1.equal(getHTMLString(resultNode),'<span></span>');});it('stores renderInstance on node under the `xvdom` property',function(){assert$1.equal(resultNode.xvdom,instance);});});

	function spyOn(obj,funcName){if(!obj[funcName]||obj[funcName].isSpy)return;var origFunc=obj[funcName];function funcSpy(){++funcSpy.count;return origFunc.apply(this,arguments);}funcSpy.count=0;funcSpy.isSpy=true;funcSpy.uninstall=function(){return obj[funcName]=origFunc;};spyOn.allSpies.push(obj[funcName]=funcSpy);}spyOn.allSpies=[];spyOn.uninstall=function(){spyOn.allSpies.forEach(function(spy){return spy.uninstall();});spyOn.allSpies=[];};spyOn.resetSpyCounts=function(){return spyOn.allSpies.forEach(function(spy){return spy.count=0;});};

	var _xvdomSpec3={c:function c(inst){var _n=document.createElement('div');_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec2={c:function c(inst){var _n=document.createElement('div');inst.b=_n;_n.className=inst.a;return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.b.className=inst.a;pInst.a=inst.a;}},r:xvdom.Pool()};var _xvdomSpec$1={c:function c(inst){var _n=document.createElement('div');inst.b=_n;_n.className=inst.a;return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.b.className=inst.a;pInst.a=inst.a;}},r:xvdom.Pool()};describe('render recycled - node, renderInstance',function(){var render=function render(key,className){return {$s:_xvdomSpec$1,a:className,key:key};};var parentNode=void 0,node0=void 0,node1=void 0;beforeEach(function(){spyOn.uninstall();spyOn(Node.prototype,'insertBefore');spyOn(Node.prototype,'appendChild');spyOn(Node.prototype,'removeChild');spyOn(document,'createElement');parentNode=document.createElement('div');node0=xvdom.render(render(0,'_0'));node1=xvdom.render(render(1,'_1'));assert$1.equal(getHTMLString(node0),'<div class="_0"></div>');assert$1.equal(getHTMLString(node1),'<div class="_1"></div>');parentNode.appendChild(node0);parentNode.appendChild(node1);xvdom.unmount(node0);xvdom.unmount(node1);spyOn.resetSpyCounts();});afterEach(function(){return spyOn.uninstall();});it('ressurects and rerenders unmounted render instances',function(){var newNode0=xvdom.render(render(1,'_01'));assert$1.strictEqual(newNode0,node1);assert$1.equal(getHTMLString(newNode0),'<div class="_01"></div>');var newNode1=xvdom.render(render(0,'_11'));assert$1.strictEqual(newNode1,node0);assert$1.equal(getHTMLString(newNode1),'<div class="_11"></div>');var newNode2=xvdom.render(render(1,'_21'));assert$1.notStrictEqual(newNode2,node0);assert$1.notStrictEqual(newNode2,node1);});describe('Arrays',function(){var renderArray=function renderArray(children){return {$s:_xvdomSpec3,a:children.map(function(child){return {$s:_xvdomSpec2,a:child.className,key:child.key};})};};it('Remove from the end',function(){var target=xvdom.render(renderArray([{key:0,className:'_0'},{key:1,className:'_1'},{key:2,className:'_2'}]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(target,renderArray([{key:0,className:'_0'}]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,0);spyOn.resetSpyCounts();xvdom.rerender(target,renderArray([{key:0,className:'_0'},{key:1,className:'_1'},{key:2,className:'_2'}]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,0);spyOn.resetSpyCounts();xvdom.rerender(target,renderArray([{key:0,className:'_0'}]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,0);spyOn.resetSpyCounts();xvdom.rerender(target,renderArray([{key:0,className:'_0'},{key:1,className:'_1'},{key:2,className:'_2'}]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,0);spyOn.resetSpyCounts();});});});

	// import assert        from 'assert';
	// import getHTMLString from './utils/getHTMLString.js';
	// import xvdom    from '../src/index.js';
	//
	// describe('renderArray - frag, array', ()=>{
	//   let markerNode, frag;
	//
	//   beforeEach(()=>{
	//     frag = document.createDocumentFragment();
	//     markerNode = xvdom.renderArray(
	//       frag,
	//       [
	//         <a key='one'></a>,
	//         <i key='two'></i>
	//       ]
	//     );
	//   });
	//
	//   it('returns marker node (empty text node) with map (key to node)', ()=>{
	//     assert(markerNode instanceof Text);
	//   });
	//
	//   it('renders array items to `frag`', ()=>{
	//     const parentNode = document.createElement('div');
	//     parentNode.appendChild(frag);
	//
	//     assert.equal(getHTMLString(parentNode),
	//       '<div>'+
	//         '<a></a>'+
	//         '<i></i>'+
	//       '</div>'
	//     );
	//   });
	// });

	var wrapSpecRenderFunctions = (function(inst,onRender,onRerender){if(!inst.$s.isTrackingCount){(function(){inst.$s.isTrackingCount=true;var _inst$$s=inst.$s;var c=_inst$$s.c;var u=_inst$$s.u;inst.$s.c=function(){return onRender(),c.apply(undefined,arguments);};inst.$s.u=function(){return onRerender(),u.apply(undefined,arguments);};})();}return inst;})

	var _xvdomSpec2$1={c:function c(){var _n=document.createElement('b');return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec$2={c:function c(){var _n=document.createElement('span');return _n;},u:function u(){},r:xvdom.Pool()};describe('rerender - node, instance',function(){var renderCallCount=void 0,rerenderCallCount=void 0,node=void 0;var render=function render(){return wrapSpecRenderFunctions({$s:_xvdomSpec$2},function(){return renderCallCount++;},function(){return rerenderCallCount++;});};beforeEach(function(){spyOn.uninstall();spyOn(document,'createElement');node=xvdom.render(render());rerenderCallCount=renderCallCount=0;});afterEach(function(){spyOn.uninstall();});it('calls rerender() with values and previous values w/context',function(){xvdom.rerender(node,render());assert$1.equal(getHTMLString(node),'<span></span>');assert$1.equal(renderCallCount,0);assert$1.equal(rerenderCallCount,1);});describe('when the instance is for a different spec',function(){var parentNode=void 0,newNode=void 0;beforeEach(function(){parentNode=document.createElement('div');parentNode.appendChild(node);newNode=xvdom.rerender(node,{$s:_xvdomSpec2$1});});it('calls render()',function(){assert$1.equal(getHTMLString(parentNode),'<div><b></b></div>');assert$1.equal(renderCallCount,0);assert$1.equal(rerenderCallCount,0);assert$1.notEqual(newNode,node);});it('recycles',function(){spyOn.resetSpyCounts();xvdom.rerender(newNode,render());assert$1.equal(getHTMLString(parentNode),'<div><span></span></div>');assert$1.equal(renderCallCount,0);assert$1.equal(rerenderCallCount,1);assert$1.equal(document.createElement.count,0);});});});

	var _xvdomSpec6={c:function c(){var _n=document.createElement('a');_n.appendChild(document.createTextNode(('hello world')||''));return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec5={c:function c(inst){var _n=document.createElement('div');_n.appendChild(document.createElement('a'));_n.appendChild(xvdom.createDynamic(false,_n,inst.a,inst,'b','c'));_n.appendChild(document.createElement('b'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(false,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec4={c:function c(inst){var _n=document.createElement('div');_n.appendChild(document.createElement('a'));_n.appendChild(xvdom.createDynamic(false,_n,inst.a,inst,'b','c'));_n.appendChild(document.createElement('b'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(false,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec3$1={c:function c(inst){var _n=document.createElement('a');inst.b=_n;_n.id=inst.a;return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.b.id=inst.a;pInst.a=inst.a;}},r:xvdom.DEADPOOL};var _xvdomSpec2$2={c:function c(inst){var _n=document.createElement('div');_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec$3={c:function c(inst){var _n=document.createElement('div');inst.b=_n;_n.className=inst.a;return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.b.className=inst.a;pInst.a=inst.a;}},r:xvdom.DEADPOOL};describe('xvdom.rerenderArray - newValue, previousValueAndContext, valueIndex, xvdom.rerenderIndex, xvdom.rerenderContextIndex',function(){beforeEach(function(){spyOn.uninstall();spyOn(Node.prototype,'insertBefore');spyOn(Node.prototype,'appendChild');spyOn(Node.prototype,'removeChild');spyOn(Node.prototype,'replaceChild');spyOn(document,'createElement');spyOn.resetSpyCounts();});afterEach(function(){spyOn.uninstall();});describe('Arrays',function(){var renderChild=function renderChild(key,className){return {$s:_xvdomSpec$3,a:className,key:key};};var render=function render(children,key){return {$s:_xvdomSpec2$2,a:children,key:key};};it('Handles keys that are JS reserved words',function(){var parentNode=xvdom.render(render([renderChild('a','a')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="a"></div>'+'</div>');xvdom.rerender(parentNode,render([renderChild('constructor','constructor'),renderChild('hasOwnProperty','hasOwnProperty'),renderChild('toString','toString'),renderChild('valueOf','valueOf'),renderChild('__proto__','__proto__')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="constructor"></div>'+'<div class="hasOwnProperty"></div>'+'<div class="toString"></div>'+'<div class="valueOf"></div>'+'<div class="__proto__"></div>'+'</div>');});it('Update array items',function(){var parentNode=xvdom.render(render([renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="1"></div>'+'<div class="2"></div>'+'<div class="3"></div>'+'</div>');xvdom.rerender(parentNode,render([renderChild(4,'4'),renderChild(5,'5'),renderChild(6,'6')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="4"></div>'+'<div class="5"></div>'+'<div class="6"></div>'+'</div>');});it('Update array items (item changes spec)',function(){var renderChild2=function renderChild2(key,id){return {$s:_xvdomSpec3$1,a:id,key:key};};var target=xvdom.render(render([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild2(1,'_1'),renderChild(2,'_2'),renderChild2(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<a id="_1"></a>'+'<div class="_2"></div>'+'<a id="_3"></a>'+'</div>');assert$1.equal(document.createElement.count,2);spyOn.resetSpyCounts();});it('Reordering',function(){var parentNode=xvdom.render(render([renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3')]));spyOn.resetSpyCounts();xvdom.rerender(parentNode,render([renderChild(3,'3'),renderChild(2,'2'),renderChild(1,'1')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="3"></div>'+'<div class="2"></div>'+'<div class="1"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.appendChild.count,1);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();xvdom.rerender(parentNode,render([renderChild(1,'1'),renderChild(3,'3'),renderChild(2,'2')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="1"></div>'+'<div class="3"></div>'+'<div class="2"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.removeChild.count,0);});it('Reordering 2',function(){var target=xvdom.render(render([renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="1"></div>'+'<div class="2"></div>'+'<div class="3"></div>'+'</div>');spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(2,'2'),renderChild(1,'1'),renderChild(3,'3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="2"></div>'+'<div class="1"></div>'+'<div class="3"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();});it('Reordering 3',function(){var target=xvdom.render(render([renderChild(0,'0'),renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="0"></div>'+'<div class="1"></div>'+'<div class="2"></div>'+'<div class="3"></div>'+'</div>');assert$1.equal(document.createElement.count,5);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(2,'21'),renderChild(3,'31'),renderChild(0,'01'),renderChild(1,'11')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="21"></div>'+'<div class="31"></div>'+'<div class="01"></div>'+'<div class="11"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.appendChild.count,3);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();});it('Reordering 4',function(){var parentNode=xvdom.render(render([renderChild(1,'1'),renderChild(0,'0'),renderChild(3,'3'),renderChild(2,'2')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="1"></div>'+'<div class="0"></div>'+'<div class="3"></div>'+'<div class="2"></div>'+'</div>');xvdom.rerender(parentNode,render([renderChild(0,'0'),renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="0"></div>'+'<div class="1"></div>'+'<div class="2"></div>'+'<div class="3"></div>'+'</div>');xvdom.rerender(parentNode,render([renderChild(0,'0'),renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3'),renderChild(4,'4')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="0"></div>'+'<div class="1"></div>'+'<div class="2"></div>'+'<div class="3"></div>'+'<div class="4"></div>'+'</div>');});it('Reordering in the middle of statics',function(){var renderWithStatics=function renderWithStatics(children){return {$s:_xvdomSpec4,a:children};};var target=xvdom.render(renderWithStatics([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,6);spyOn.resetSpyCounts();});it('Add to the start',function(){var target=xvdom.render(render([renderChild(0,'_0')]));var childEl0=target.querySelector('._0');assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,2);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(1,'_1'),renderChild(0,'_0')]));var childEl1=target.querySelector('._1');assert$1.equal(getHTMLString(target),'<div>'+'<div class="_1"></div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,1);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(childEl0,target.querySelector('._0'));spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(2,'_2'),renderChild(1,'_1'),renderChild(0,'_0')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_2"></div>'+'<div class="_1"></div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,1);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(childEl0,target.querySelector('._0'));assert$1.equal(childEl1,target.querySelector('._1'));spyOn.resetSpyCounts();});it('Add and change the start item',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'</div>');xvdom.rerender(target,render([renderChild(3,'_3'),renderChild(1,'_1')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_3"></div>'+'<div class="_1"></div>'+'</div>');spyOn.resetSpyCounts();});it('Add and change the end item',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'</div>');xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_3"></div>'+'</div>');spyOn.resetSpyCounts();});it('Add and change the middle item',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(1,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(3,'_3'),renderChild(1,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_3"></div>'+'<div class="_2"></div>'+'</div>');spyOn.resetSpyCounts();});it('Add in the middle',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,5);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(4,'_New1'),renderChild(5,'_New2'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_New1"></div>'+'<div class="_New2"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,2);assert$1.equal(Node.prototype.insertBefore.count,2);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(4,'_New1'),renderChild(6,'_New1_1'),renderChild(7,'_New1_2'),renderChild(5,'_New2'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_New1"></div>'+'<div class="_New1_1"></div>'+'<div class="_New1_2"></div>'+'<div class="_New2"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,2);assert$1.equal(Node.prototype.insertBefore.count,2);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();});it('Add in the middle and end',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'</div>');assert$1.equal(document.createElement.count,3);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(2,'_New_0_0'),renderChild(1,'_1'),renderChild(3,'_New_1_0')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_New_0_0"></div>'+'<div class="_1"></div>'+'<div class="_New_1_0"></div>'+'</div>');assert$1.equal(document.createElement.count,2);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.appendChild.count,2);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();});it('Add to the end',function(){var target=xvdom.render(render([renderChild(0,'_0')]));var childEl0=target.querySelector('._0');assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,2);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1')]));var childEl1=target.querySelector('._1');assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'</div>');assert$1.equal(document.createElement.count,1);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.appendChild.count,1);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(childEl0,target.querySelector('._0'));spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,1);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.appendChild.count,1);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(childEl0,target.querySelector('._0'));assert$1.equal(childEl1,target.querySelector('._1'));spyOn.resetSpyCounts();});it('Remove from the start',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,1);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,1);});it('Remove from the middle',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4'),renderChild(5,'_5')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'<div class="_5"></div>'+'</div>');assert$1.equal(document.createElement.count,7);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(4,'_4'),renderChild(5,'_5')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_4"></div>'+'<div class="_5"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,2);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(5,'_5')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_5"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,2);});it('Remove from the middle and end',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4'),renderChild(5,'_5')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'<div class="_5"></div>'+'</div>');assert$1.equal(document.createElement.count,7);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,3);assert$1.equal(Node.prototype.removeChild.count,2);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,1);assert$1.equal(Node.prototype.removeChild.count,2);});it('Remove from the end',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,1);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,1);});it('Remove from the start and end',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4'),renderChild(5,'_5')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'<div class="_5"></div>'+'</div>');assert$1.equal(document.createElement.count,7);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,4);assert$1.equal(Node.prototype.removeChild.count,2);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,2);assert$1.equal(Node.prototype.removeChild.count,2);});it('All removed',function(){var target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(target,render([]));assert$1.equal(getHTMLString(target),'<div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.appendChild.count,0);assert$1.equal(Node.prototype.removeChild.count,0);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'</div>');assert$1.equal(document.createElement.count,3);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.appendChild.count,3);assert$1.equal(Node.prototype.removeChild.count,0);});it('Initially empty',function(){var target=xvdom.render(render([]));assert$1.equal(getHTMLString(target),'<div>'+'</div>');assert$1.equal(document.createElement.count,1);spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,3);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.appendChild.count,3);assert$1.equal(Node.prototype.removeChild.count,0);});it('Array of Arrays',function(){var target=xvdom.render(render([render([renderChild(1,'_1_1')],1)]));assert$1.equal(getHTMLString(target),'<div>'+'<div>'+'<div class="_1_1"></div>'+'</div>'+'</div>');assert$1.equal(document.createElement.count,3);spyOn.resetSpyCounts();xvdom.rerender(target,render([render([renderChild(1,'_1_1'),renderChild(2,'_1_2')],1)]));assert$1.equal(getHTMLString(target),'<div>'+'<div>'+'<div class="_1_1"></div>'+'<div class="_1_2"></div>'+'</div>'+'</div>');assert$1.equal(document.createElement.count,1);spyOn.resetSpyCounts();xvdom.rerender(target,render([render([renderChild(1,'_1_1'),renderChild(2,'_1_2')],1),render([renderChild(1,'_2_1'),renderChild(2,'_2_2')],2)]));assert$1.equal(getHTMLString(target),'<div>'+'<div>'+'<div class="_1_1"></div>'+'<div class="_1_2"></div>'+'</div>'+'<div>'+'<div class="_2_1"></div>'+'<div class="_2_2"></div>'+'</div>'+'</div>');assert$1.equal(document.createElement.count,3);spyOn.resetSpyCounts();xvdom.rerender(target,render([render([renderChild(1,'_0_1'),renderChild(2,'_0_2'),renderChild(3,'_0_3')],0),render([renderChild(1,'_1_1'),renderChild(2,'_1_2')],1),render([renderChild(1,'_2_1'),renderChild(2,'_2_2')],2)]));assert$1.equal(getHTMLString(target),'<div>'+'<div>'+'<div class="_0_1"></div>'+'<div class="_0_2"></div>'+'<div class="_0_3"></div>'+'</div>'+'<div>'+'<div class="_1_1"></div>'+'<div class="_1_2"></div>'+'</div>'+'<div>'+'<div class="_2_1"></div>'+'<div class="_2_2"></div>'+'</div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(target,render([render([renderChild(1,'_0_1'),renderChild(2,'_0_2'),renderChild(3,'_0_3')],0),render([renderChild(1,'_2_1'),renderChild(2,'_2_2')],2)]));assert$1.equal(getHTMLString(target),'<div>'+'<div>'+'<div class="_0_1"></div>'+'<div class="_0_2"></div>'+'<div class="_0_3"></div>'+'</div>'+'<div>'+'<div class="_2_1"></div>'+'<div class="_2_2"></div>'+'</div>'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.removeChild.count,1);});describe('Changing dynamic type: Array to ...',function(){var target=void 0;function rerenderAndValidateArray(){spyOn.resetSpyCounts();xvdom.rerender(target,render([renderChild(0,'_0'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,2);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.appendChild.count,2);}beforeEach(function(){target=xvdom.render(render([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();});it('Element',function(){xvdom.rerender(target,render(renderChild(null,'_777')));assert$1.equal(getHTMLString(target),'<div>'+'<div class="_777"></div>'+'</div>');assert$1.equal(document.createElement.count,1);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(Node.prototype.appendChild.count,1);assert$1.equal(Node.prototype.replaceChild.count,0);assert$1.equal(target.childNodes.length,1);rerenderAndValidateArray();});it('Text',function(){xvdom.rerender(target,render('_777'));assert$1.equal(getHTMLString(target),'<div>'+'_777'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(Node.prototype.replaceChild.count,0);assert$1.equal(target.childNodes.length,1);rerenderAndValidateArray();});it('undefined',function(){xvdom.rerender(target,render(undefined));assert$1.equal(getHTMLString(target),'<div>'+'<!---->'+'</div>');assert$1.equal(document.createElement.count,0);assert$1.equal(Node.prototype.insertBefore.count,0);assert$1.equal(Node.prototype.removeChild.count,0);assert$1.equal(Node.prototype.replaceChild.count,0);assert$1.equal(target.childNodes.length,1);rerenderAndValidateArray();});});describe('In the middle of statics',function(){var renderWithStatics=function renderWithStatics(children){return {$s:_xvdomSpec5,a:children};};var target=void 0;beforeEach(function(){target=xvdom.render(renderWithStatics([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,6);spyOn.resetSpyCounts();});it('Reordering',function(){xvdom.rerender(target,renderWithStatics([renderChild(3,'_3'),renderChild(2,'_2'),renderChild(1,'_1')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_3"></div>'+'<div class="_2"></div>'+'<div class="_1"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,0);});it('Add and change first item',function(){xvdom.rerender(target,renderWithStatics([renderChild(4,'_4'),renderChild(2,'_2'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_4"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,1);});it('Add and change last item',function(){xvdom.rerender(target,renderWithStatics([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(4,'_4')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_4"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,1);});it('Add and change middle item',function(){xvdom.rerender(target,renderWithStatics([renderChild(1,'_1'),renderChild(4,'_4'),renderChild(3,'_3')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_1"></div>'+'<div class="_4"></div>'+'<div class="_3"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,1);});it('Adding',function(){xvdom.rerender(target,renderWithStatics([renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,1);spyOn.resetSpyCounts();xvdom.rerender(target,renderWithStatics([renderChild(0,'_0'),renderChild(1,'_1'),renderChild(2,'_2'),renderChild(3,'_3'),renderChild(4,'_4')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_0"></div>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<div class="_3"></div>'+'<div class="_4"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,1);});it('Removing',function(){xvdom.rerender(target,renderWithStatics([renderChild(1,'_1'),renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_1"></div>'+'<div class="_2"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,0);spyOn.resetSpyCounts();xvdom.rerender(target,renderWithStatics([renderChild(2,'_2')]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<div class="_2"></div>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,0);xvdom.rerender(target,renderWithStatics([]));assert$1.equal(getHTMLString(target),'<div>'+'<a></a>'+'<!---->'+'<b></b>'+'</div>');assert$1.equal(document.createElement.count,0);});});it('Array item changes templates',function(){var parentNode=xvdom.render(render([renderChild(1,'1'),renderChild(2,'2'),renderChild(3,'3')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="1"></div>'+'<div class="2"></div>'+'<div class="3"></div>'+'</div>');assert$1.equal(document.createElement.count,4);spyOn.resetSpyCounts();xvdom.rerender(parentNode,render([renderChild(1,'1'),{$s:_xvdomSpec6,key:2},renderChild(3,'3')]));assert$1.equal(getHTMLString(parentNode),'<div>'+'<div class="1"></div>'+'<a>hello world</a>'+'<div class="3"></div>'+'</div>');assert$1.equal(document.createElement.count,1);spyOn.resetSpyCounts();});});});

	describe('xvdom.rerenderText - value, contextNode, instance, rerenderIndex, rerenderContextIndex',function(){var initialValue='initial text';var textNode=void 0,instance=void 0,returnValue=void 0;beforeEach(function(){textNode=document.createTextNode(initialValue);instance={spec:null};});describe('When `newValue` is a string',function(){beforeEach(function(){returnValue=xvdom.rerenderText(true,'new text',initialValue,textNode,instance,'r0','c0');});it('updates text node value',function(){assert$1.equal(textNode.nodeValue,'new text');});it('returns `newValue`',function(){assert$1.equal(returnValue,'new text');});});describe('When `newValue` is a number',function(){beforeEach(function(){returnValue=xvdom.rerenderText(true,0,initialValue,textNode,instance,'r0','c0');});it('updates text node value',function(){assert$1.equal(textNode.nodeValue,'0');});it('returns `newValue`',function(){assert$1.equal(returnValue,0);});});[null,undefined].forEach(function(value){describe('When newValue is '+value,function(){it('updates text node value to ""',function(){var result=xvdom.rerenderText(true,value,initialValue,textNode,instance,'r0','c0');assert$1.equal(textNode.nodeValue,'');assert$1.equal(result,value);});});});});

	describe('rerenderDynamic - value, contextNode, instance, rerenderIndex, rerenderContextIndex',function(){var initialValue='initial text';var textNode=void 0,instance=void 0,parentNode=void 0,returnValue=void 0;beforeEach(function(){parentNode=document.createElement('div');textNode=document.createTextNode(initialValue);parentNode.appendChild(textNode);instance={spec:null};});describe('When node has been removed',function(){beforeEach(function(){parentNode.removeChild(textNode);});it('does nothing and does not throw error',function(){try{xvdom.rerenderDynamic(true,'new text',initialValue,textNode,instance,'r0','c0');assert$1.equal(parentNode.children.length,0);}catch(e){assert$1.ok(false);}});});describe('When `newValue` is a string',function(){beforeEach(function(){returnValue=xvdom.rerenderDynamic(true,'new text',initialValue,textNode,instance,'r0','c0');});it('updates text node value',function(){assert$1.equal(parentNode.firstChild.nodeValue,'new text');});it('returns `newValue`',function(){assert$1.equal(returnValue,'new text');});});describe('When `newValue` is a number',function(){beforeEach(function(){returnValue=xvdom.rerenderDynamic(true,0,initialValue,textNode,instance,'r0','c0');});it('updates text node value',function(){assert$1.equal(parentNode.firstChild.nodeValue,'0');});it('returns `newValue`',function(){assert$1.equal(returnValue,0);});});[null,undefined].forEach(function(value){describe('When newValue is '+value,function(){it('updates text node value to ""',function(){var result=xvdom.rerenderDynamic(true,value,initialValue,textNode,instance,'r0','c0');assert$1.equal(parentNode.firstChild.nodeValue,'');assert$1.equal(result,value);});});});});

	var _xvdomSpec3$2={c:function c(inst){var _n=document.createElement('span');inst.b=_n;_n.className=inst.a;return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.b.className=inst.a;pInst.a=inst.a;}},r:xvdom.DEADPOOL};var _xvdomSpec2$3={c:function c(){var _n=document.createElement('span');return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec$4={c:function c(inst){var _n=document.createElement('div');_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};describe('createDynamic - isOnlyChild, value, instance, rerenderIndex, rerenderContextIndex',function(){var instance=void 0,parentNode=void 0,resultNode=void 0;beforeEach(function(){parentNode=document.createElement('div');});[null,undefined,true,false].forEach(function(value){describe(value+' - empty text node',function(){beforeEach(function(){instance={$s:_xvdomSpec$4,a:value};resultNode=xvdom.createDynamic(true,parentNode,instance.v0,instance,'r0','c0');parentNode.appendChild(resultNode);});it('renders text node with string',function(){assert$1.ok(resultNode instanceof Comment);assert$1.equal(getHTMLString(parentNode),'<div>'+'<!---->'+'</div>');});it('sets rerender function and context',function(){assert$1.equal(instance.r0,xvdom.rerenderDynamic);assert$1.equal(instance.c0,parentNode.firstChild);});});});describe('String - text node',function(){beforeEach(function(){var string='test string';instance={v0:string};resultNode=xvdom.createDynamic(true,parentNode,instance.v0,instance,'r0','c0');parentNode.appendChild(resultNode);});it('renders text node with string',function(){assert$1.equal(getHTMLString(parentNode),'<div>test string</div>');});it('sets rerender function and context',function(){assert$1.equal(instance.r0,xvdom.rerenderText);assert$1.equal(instance.c0,parentNode.firstChild);});});describe('Number - text node',function(){beforeEach(function(){var num=0;instance={v0:num};resultNode=xvdom.createDynamic(true,parentNode,instance.v0,instance,'r0','c0');parentNode.appendChild(resultNode);});it('renders text node with string',function(){assert$1.equal(getHTMLString(parentNode),'<div>0</div>');});it('sets rerender function and context',function(){assert$1.equal(instance.r0,xvdom.rerenderText);assert$1.equal(instance.c0,parentNode.firstChild);});});describe('Object - render instance',function(){beforeEach(function(){var childInstance={$s:_xvdomSpec2$3};instance={v0:childInstance};resultNode=xvdom.createDynamic(true,parentNode,instance.v0,instance,'r0','c0');parentNode.appendChild(resultNode);});it('renders render instance',function(){assert$1.equal(getHTMLString(parentNode),'<div><span></span></div>');});it('sets rerender function and context',function(){assert$1.equal(instance.r0,xvdom.rerenderInstance);assert$1.equal(instance.c0,parentNode.firstChild);});});describe('Array',function(){var renderChild=function renderChild(key,className){return {$s:_xvdomSpec3$2,a:className,key:key};};beforeEach(function(){instance={v0:[renderChild(1,'one'),renderChild(2,'two')]};resultNode=xvdom.createDynamic(true,parentNode,instance.v0,instance,'r0','c0');parentNode.appendChild(resultNode);});it('renders array of items',function(){assert$1.equal(getHTMLString(parentNode),'<div>'+'<span class="one"></span>'+'<span class="two"></span>'+'</div>');});it('sets rerender function and context',function(){assert$1.equal(instance.r0,xvdom.rerenderArrayMaybe);assert$1.equal(instance.c0,parentNode);});});});

	var _xvdomSpec7={c:function c(inst){var _n=document.createElement('div'),_n2;_n2=xvdom.createComponent(Container,{count:inst.p0count},inst,'b','c','d');_n.appendChild(_n2);return _n;},u:function u(inst,pInst){if(inst.p0count!==pInst.p0count){pInst.b(Container,{count:inst.p0count},null,pInst.d,pInst.c,pInst,'c','d');pInst.p0count=inst.p0count;}},r:xvdom.DEADPOOL};var _xvdomSpec6$1={c:function c(inst){var _n=xvdom.createComponent(NoPropsComp,null,inst,'b','c','d');return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec5$1={c:function c(inst){var _n=document.createElement('div'),_n2;_n2=xvdom.createComponent(Counter,{type:inst.p0type,count:inst.p0count},inst,'b','c','d');_n.appendChild(_n2);return _n;},u:function u(inst,pInst){if(inst.p0type!==pInst.p0type||inst.p0count!==pInst.p0count){pInst.b(Counter,{type:inst.p0type,count:inst.p0count},null,pInst.d,pInst.c,pInst,'c','d');pInst.p0type=inst.p0type;pInst.p0count=inst.p0count;}},r:xvdom.DEADPOOL};var _xvdomSpec4$1={c:function c(inst){var _n=xvdom.createComponent(Counter,{type:inst.p0type,count:inst.p0count},inst,'b','c','d');return _n;},u:function u(inst,pInst){if(inst.p0type!==pInst.p0type||inst.p0count!==pInst.p0count){pInst.b(Counter,{type:inst.p0type,count:inst.p0count},null,pInst.d,pInst.c,pInst,'c','d');pInst.p0type=inst.p0type;pInst.p0count=inst.p0count;}},r:xvdom.DEADPOOL};var _xvdomSpec3$3={c:function c(){var _n=document.createElement('span');_n.appendChild(document.createTextNode(('test')||''));return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec2$4={c:function c(inst){var _n=document.createElement('span');_n.appendChild(document.createTextNode(('count: ')||''));_n.appendChild(xvdom.createDynamic(false,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(false,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec$5={c:function c(inst){var _n=document.createElement('a');_n.appendChild(document.createTextNode(('count2: ')||''));_n.appendChild(xvdom.createDynamic(false,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(false,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var Counter=function Counter(_ref){var type=_ref.type;var count=_ref.count;return Counter.callCount=Counter.callCount?Counter.callCount+1:1,type===2?{$s:_xvdomSpec$5,a:count}:{$s:_xvdomSpec2$4,a:count};};var NoPropsComp=function NoPropsComp(props){return NoPropsComp.callArgs.push(props),{$s:_xvdomSpec3$3};};var Container=function Container(_ref2){var count=_ref2.count;return {$s:_xvdomSpec4$1,p0type:count%3,p0count:count};};describe('Component',function(){describe('Stateless',function(){var node=void 0;var render=function render(_ref3){var type=_ref3.type;var count=_ref3.count;return {$s:_xvdomSpec5$1,p0type:type,p0count:count};};beforeEach(function(){Counter.callCount=0;node=xvdom.render(render({count:777}));});it('renders',function(){assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 777'+'</span>'+'</div>');});it('rerenders',function(){xvdom.rerender(node,render({count:10}));assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 10'+'</span>'+'</div>');xvdom.rerender(node,render({count:11}));assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 11'+'</span>'+'</div>');xvdom.rerender(node,render({type:2,count:20}));assert$1.equal(getHTMLString(node),'<div>'+'<a>'+'count2: 20'+'</a>'+'</div>');xvdom.rerender(node,render({type:2,count:21}));assert$1.equal(getHTMLString(node),'<div>'+'<a>'+'count2: 21'+'</a>'+'</div>');xvdom.rerender(node,render({count:12}));assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 12'+'</span>'+'</div>');});});it('handles null props (no props)',function(){NoPropsComp.callArgs=[];var node=xvdom.render({$s:_xvdomSpec6$1});assert$1.deepEqual(NoPropsComp.callArgs[0],{});assert$1.equal(getHTMLString(node),'<span>'+'test'+'</span>');});describe('Nested Stateless',function(){var node=void 0;var render2=function render2(count){return {$s:_xvdomSpec7,p0count:count};};beforeEach(function(){Counter.callCount=0;node=xvdom.render(render2(0));});it('renders',function(){assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 0'+'</span>'+'</div>');});it('rerenders',function(){xvdom.rerender(node,render2(1));assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 1'+'</span>'+'</div>');xvdom.rerender(node,render2(0));assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 0'+'</span>'+'</div>');xvdom.rerender(node,render2(2));assert$1.equal(getHTMLString(node),'<div>'+'<a>'+'count2: 2'+'</a>'+'</div>');xvdom.rerender(node,render2(5));assert$1.equal(getHTMLString(node),'<div>'+'<a>'+'count2: 5'+'</a>'+'</div>');xvdom.rerender(node,render2(1));assert$1.equal(getHTMLString(node),'<div>'+'<span>'+'count: 1'+'</span>'+'</div>');});});});

	var _xvdomSpec6$2={c:function c(inst){var _n=xvdom.createComponent(StatefulCounter,{initialCount:inst.p0initialCount,forceFirst:inst.p0forceFirst},inst,'b','c','d');return _n;},u:function u(inst,pInst){if(inst.p0initialCount!==pInst.p0initialCount||inst.p0forceFirst!==pInst.p0forceFirst){pInst.b(StatefulCounter,{initialCount:inst.p0initialCount,forceFirst:inst.p0forceFirst},null,pInst.d,pInst.c,pInst,'c','d');pInst.p0initialCount=inst.p0initialCount;pInst.p0forceFirst=inst.p0forceFirst;}},r:xvdom.DEADPOOL};var _xvdomSpec5$2={c:function c(inst){var _n=xvdom.createComponent(NoOnPropsComp,{message:inst.p0message},inst,'b','c','d');return _n;},u:function u(inst,pInst){if(inst.p0message!==pInst.p0message){pInst.b(NoOnPropsComp,{message:inst.p0message},null,pInst.d,pInst.c,pInst,'c','d');pInst.p0message=inst.p0message;}},r:xvdom.DEADPOOL};var _xvdomSpec4$2={c:function c(inst){var _n=document.createElement('h2');_n.appendChild(xvdom.createDynamic(false,_n,inst.a,inst,'b','c'));_n.appendChild(xvdom.createDynamic(false,_n,inst.d,inst,'e','f'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(false,inst.a,pInst.a,pInst.c,pInst,'b','c');}if(inst.d!==pInst.d){pInst.d=pInst.e(false,inst.d,pInst.d,pInst.f,pInst,'e','f');}},r:xvdom.DEADPOOL};var _xvdomSpec3$4={c:function c(inst){var _n=document.createElement('h1');_n.appendChild(xvdom.createDynamic(false,_n,inst.a,inst,'b','c'));_n.appendChild(xvdom.createDynamic(false,_n,inst.d,inst,'e','f'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(false,inst.a,pInst.a,pInst.c,pInst,'b','c');}if(inst.d!==pInst.d){pInst.d=pInst.e(false,inst.d,pInst.d,pInst.f,pInst,'e','f');}},r:xvdom.DEADPOOL};var _xvdomSpec2$5={c:function c(inst){var _n=document.createElement('span');_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec$6={c:function c(inst){var _n=document.createElement('a');_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var renderCountSpec1=void 0;
	var renderCountSpec2=void 0;
	var StatefulCounter=function StatefulCounter(props,state,actions){StatefulCounter.callCount=StatefulCounter.callCount+1;StatefulCounter.callsArgs.push([props,state,actions]);if(!state.forceFirst&&state.count%2){return wrapSpecRenderFunctions({$s:_xvdomSpec$6,a:'initialCount2: '+props.initialCount+', count2: '+state.count},function(){return renderCountSpec2++;},function(){});}else {return wrapSpecRenderFunctions({$s:_xvdomSpec2$5,a:'initialCount: '+props.initialCount+', count: '+state.count},function(){return renderCountSpec1++;},function(){});}};StatefulCounter.state={onInit:function onInit(props,state,actions){return actions.onInit2();},onInit2:function onInit2(props){return {count:props.initialCount||0};},onProps:function onProps(props,state,actions){return babelHelpers.extends({},state,{forceFirst:props.forceFirst});},incrementBy:function incrementBy(props,state,actions,amt){return {count:state.count+amt};},increment:function increment(props,state,actions){return {count:state.count+1};},decrement:function decrement(props,state,actions){return {count:state.count-1};},noop:function noop(props,state,actions){return state;},noopUndef:function noopUndef(props,state,actions){return undefined;},redirect:function redirect(props,state,actions){return actions.increment();}};var NoOnPropsComp=function NoOnPropsComp(props,state){return props.message==='hello'?{$s:_xvdomSpec3$4,a:props.message,d:state}:{$s:_xvdomSpec4$2,a:props.message,d:state};};NoOnPropsComp.state={onInit:function onInit(props){return 'world';}};describe('Stateful Components',function(){describe('No `onProps`',function(){var node=void 0,parentNode=void 0;var render=function render(message){return {$s:_xvdomSpec5$2,p0message:message};};beforeEach(function(){parentNode=document.createElement('div');node=xvdom.render(render('hello'));parentNode.appendChild(node);});it('renders',function(){assert$1.equal(getHTMLString(parentNode),'<div>'+'<h1>'+'hello'+'world'+'</h1>'+'</div>');});it('rerenders when props change',function(){xvdom.rerender(parentNode.firstChild,render('goodbye'));assert$1.equal(getHTMLString(parentNode),'<div>'+'<h2>'+'goodbye'+'world'+'</h2>'+'</div>');});});describe('With actions',function(){var node=void 0,parentNode=void 0;var render=function render(initialCount,forceFirst){return {$s:_xvdomSpec6$2,p0initialCount:initialCount,p0forceFirst:forceFirst};};beforeEach(function(){renderCountSpec1=renderCountSpec2=0;StatefulCounter.callCount=0;StatefulCounter.callsArgs=[];parentNode=document.createElement('div');node=xvdom.render(render(777));parentNode.appendChild(node);});it('renders',function(){assert$1.equal(getHTMLString(parentNode),'<div>'+'<a>'+'initialCount2: 777, count2: 777'+'</a>'+'</div>');});describe('calling state actions',function(){it('rerenders if action generates a new state',function(){var _StatefulCounter$call=babelHelpers.slicedToArray(StatefulCounter.callsArgs[0],3);var  /*props*/ /*state*/increment=_StatefulCounter$call[2].increment;increment();assert$1.equal(getHTMLString(parentNode),'<div>'+'<span>'+'initialCount: 777, count: 778'+'</span>'+'</div>');var _StatefulCounter$call2=babelHelpers.slicedToArray(StatefulCounter.callsArgs[1],3);var  /*props*/ /*state*/incrementBy=_StatefulCounter$call2[2].incrementBy;assert$1.deepEqual(incrementBy(5),{count:783});assert$1.equal(getHTMLString(parentNode),'<div>'+'<a>'+'initialCount2: 777, count2: 783'+'</a>'+'</div>');var _StatefulCounter$call3=babelHelpers.slicedToArray(StatefulCounter.callsArgs[2],3);var  /*props*/ /*state*/decrement=_StatefulCounter$call3[2].decrement;assert$1.deepEqual(decrement(),{count:782});assert$1.equal(getHTMLString(parentNode),'<div>'+'<span>'+'initialCount: 777, count: 782'+'</span>'+'</div>');var _StatefulCounter$call4=babelHelpers.slicedToArray(StatefulCounter.callsArgs[2],3);var  /*props*/ /*state*/redirect=_StatefulCounter$call4[2].redirect;assert$1.equal(StatefulCounter.callCount,4);assert$1.deepEqual(redirect(),{count:783});assert$1.equal(StatefulCounter.callCount,5);assert$1.equal(getHTMLString(parentNode),'<div>'+'<a>'+'initialCount2: 777, count2: 783'+'</a>'+'</div>');});it('does not blow up if unmounted',function(){xvdom.unmount(node);var _StatefulCounter$call5=babelHelpers.slicedToArray(StatefulCounter.callsArgs[0],3);var  /*props*/ /*state*/increment=_StatefulCounter$call5[2].increment;assert$1.equal(StatefulCounter.callCount,1);increment();assert$1.equal(StatefulCounter.callCount,2);});it('does not rerender if action yields the same state',function(){var _StatefulCounter$call6=babelHelpers.slicedToArray(StatefulCounter.callsArgs[0],3);var  /*props*/ /*state*/noop=_StatefulCounter$call6[2].noop;assert$1.equal(StatefulCounter.callCount,1);noop();assert$1.equal(StatefulCounter.callCount,1);assert$1.equal(getHTMLString(parentNode),'<div>'+'<a>'+'initialCount2: 777, count2: 777'+'</a>'+'</div>');});});it('rerenders',function(){assert$1.equal(renderCountSpec2,1);xvdom.rerender(parentNode.firstChild,render(10));assert$1.equal(renderCountSpec1,0);assert$1.equal(renderCountSpec2,1);assert$1.equal(getHTMLString(parentNode),'<div>'+'<a>'+'initialCount2: 10, count2: 777'+'</a>'+'</div>');xvdom.rerender(parentNode.firstChild,render(11,true));assert$1.equal(renderCountSpec1,1);assert$1.equal(renderCountSpec2,1);assert$1.equal(getHTMLString(parentNode),'<div>'+'<span>'+'initialCount: 11, count: 777'+'</span>'+'</div>');xvdom.rerender(parentNode.firstChild,render(12));assert$1.equal(renderCountSpec1,1);assert$1.equal(renderCountSpec2,2);assert$1.equal(getHTMLString(parentNode),'<div>'+'<a>'+'initialCount2: 12, count2: 777'+'</a>'+'</div>');});});});

	var _xvdomSpec4$3={c:function c(inst){var _n=xvdom.createComponent(Node$1,null,inst,'b','c','d');return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec3$5={c:function c(inst){var _n=xvdom.createComponent(LeafNode,{count:inst.p0count},inst,'b','c','d');return _n;},u:function u(inst,pInst){if(inst.p0count!==pInst.p0count){pInst.b(LeafNode,{count:inst.p0count},null,pInst.d,pInst.c,pInst,'c','d');pInst.p0count=inst.p0count;}},r:xvdom.DEADPOOL};var _xvdomSpec2$6={c:function c(inst){var _n=document.createElement('span');_n.className='spec2';_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var _xvdomSpec$7={c:function c(inst){var _n=document.createElement('span');_n.className='spec1';_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};var leafNodeToggle=void 0;var LeafNode=function LeafNode(props,state,_ref){var toggle=_ref.toggle;return leafNodeToggle=toggle,state.spec?{$s:_xvdomSpec$7,a:props.count}:{$s:_xvdomSpec2$6,a:props.count};};LeafNode.state={onInit:function onInit(props){return {spec:false};},onProps:function onProps(props,state){return babelHelpers.extends({},state);},toggle:function toggle(props,state){return {spec:!state.spec};}};var nodeIncrement=void 0;var Node$1=function Node(props,state,_ref2){var increment=_ref2.increment;return nodeIncrement=increment,{$s:_xvdomSpec3$5,p0count:state.count};};Node$1.state={onInit:function onInit(props){return {count:0};},increment:function increment(props,state){return {count:state.count+1};}};describe('Stateful Components Nested',function(){it('renders',function(){var parentNode=document.createElement('div');parentNode.appendChild(xvdom.render({$s:_xvdomSpec4$3}));assert$1.equal(getHTMLString(parentNode),'<div>'+'<span class="spec2">'+'0'+'</span>'+'</div>');leafNodeToggle();assert$1.equal(getHTMLString(parentNode),'<div>'+'<span class="spec1">'+'0'+'</span>'+'</div>');nodeIncrement();assert$1.equal(getHTMLString(parentNode),'<div>'+'<span class="spec1">'+'1'+'</span>'+'</div>');leafNodeToggle();assert$1.equal(getHTMLString(parentNode),'<div>'+'<span class="spec2">'+'1'+'</span>'+'</div>');});});

	var _xvdomSpec2$7={c:function c(){var _n=document.createElement('span');return _n;},u:function u(){},r:xvdom.DEADPOOL};var _xvdomSpec$8={c:function c(inst){var _n=document.createElement('div');_n.appendChild(xvdom.createDynamic(true,_n,inst.a,inst,'b','c'));return _n;},u:function u(inst,pInst){if(inst.a!==pInst.a){pInst.a=pInst.b(true,inst.a,pInst.a,pInst.c,pInst,'b','c');}},r:xvdom.DEADPOOL};describe('Integration',function(){var render=function render(greeting){return {$s:_xvdomSpec$8,a:greeting};};var node=void 0;describe('Dynamic changing type',function(){describe('From String',function(){beforeEach(function(){node=xvdom.render(render('hello world'));});it('renders',function(){assert$1.equal(getHTMLString(node),'<div>hello world</div>');});describe('To Object - render instance',function(){beforeEach(function(){xvdom.rerender(node,render({$s:_xvdomSpec2$7}));});it('rerenders',function(){assert$1.equal(getHTMLString(node),'<div>'+'<span></span>'+'</div>');});});});});});

}());