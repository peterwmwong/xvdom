!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xvdom=e():n.xvdom=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){n.exports=t(1)},function(n,e){"use strict";function t(){}function r(){this.map=new t}function o(n,e,t){switch(t&&t.constructor){case Number:case String:case 0:return a(t);case Object:return L(t);case Array:return w(n,e,t);default:return a("")}}e.__esModule=!0,t.prototype=Object.create(null);var u=new t,c=e.DEADPOOL={push:function(){},pop:function(){}};r.prototype.push=function(n){var e=n.key,t=this.map;n.$x=t[e],t[e]=n},r.prototype.pop=function(n){var e=this.map[n];if(e)return this.map[n]=e.$x,e};var i=function(n){n.$s.r.push(n)},a=function(n){return document.createTextNode(n)},f=function(n,e){var t=n.parentNode;t&&t.replaceChild(e,n)},d=function(n,e,t){return t?n.insertBefore(e,t):n.appendChild(e)},s=function(n,e){i(n),e.removeChild(n.$n)},p=function(n,e){for(var t=n.length,r=0;t>r;)s(n[r++],e)},v=function(n,e){for(var t=n.length,r=0;t>r;)i(n[r++]);e.textContent=""},l=function(n,e){return e.$s===n.$s&&(n.$s.u(n,e),!0)},m=function(n,e,t,r){for(var o=0;t>o;)d(n,(e[o]=M(e[o])).$n,r),++o},y=function(n,e,t){for(var r=0;t>r;)n.appendChild((e[r]=M(e[r])).$n),++r},$=function(n,e,t,r,o,u,c,i,a){for(var f=new Map,p=i.$n,v=void 0,l=void 0,m=void 0;a>=c;)v=t[c++],f.set(v.key,v);for(;o>=r;)m=e[r],l=m.key,v=f.get(l),v?(v===i&&(p=p.nextSibling),f["delete"](l),m=V(v,m)):m=M(m),e[r]=m,d(n,m.$n,p),++r;f.forEach(function(e){s(e,n)})},x=function(n,e,t,r,o,u,c,i,a,f,p,v){if(i>f)for(;u>=r;)o=e[r],d(n,(e[r]=M(o)).$n,v),++r;else if(r>u)for(;f>=i;)s(t[i++],n);else $(n,e,t,r,u,a,i,p,f)},h=function(n,e,t,r,o,u){var c=0,i=0,a=!0,f=e[0],s=r[0],p=u,v=void 0,l=void 0,m=void 0;t--,o--;n:for(;a&&o>=c&&t>=i;){for(a=!1;s.key===f.key;){if(e[i]=V(s,f),c++,i++,c>o||i>t)break n;s=r[c],f=e[i],a=!0}for(v=r[o],l=e[t];v.key===l.key;){if(p=(e[t]=V(v,l)).$n,o--,t--,c>o||i>t)break n;v=r[o],l=e[t],a=!0}for(;s.key===l.key;){if(m=(e[t]=V(s,l)).$n,v.key!==l.key&&(p=d(n,m,p)),c++,t--,c>o||i>t)break n;s=r[c],l=e[t],a=!0}for(;v.key===f.key;){if(d(n,(e[i]=V(v,f)).$n,s.$n),o--,i++,c>o||i>t)break n;v=r[o],f=e[i],a=!0}}(t>=i||o>=c)&&x(n,e,r,i,f,t,l,c,s,o,v,p)},k=function(n,e,t){var r=n.parentNode,o=e.length,u=t.length;o?u?h(r,e,o,t,u,n):m(r,e,o,n):p(t,r)},b=function(n,e,t){var r=e.length,o=t.length;r?o?h(n,e,r,t,o,null):y(n,e,r):v(t,n)},g=function(n,e,t){switch(e&&e.constructor){case String:case Number:case 0:return t.nodeValue=e,t;case Object:case Array:return C(n,e,t);default:return t.nodeValue="",t}},C=function(n,e,t){var r=o(n,t.parentNode,e);return f(t,r),r},_=function(n,e,t,r){var o=void 0;return e&&l(e,o=t.$r||t)?(e.$r=o,r):C(n,e,r)},N=function(n,e,t,r,o){var c=n(e||u);l(c,t)||f(t.$n,(r[o]=M(c)).$n)},D=function(n,e,t,r){return e instanceof Array?void(n?b(r,e,t):k(r,e,t)):n?(v(t,r),r.appendChild(o(!0,r,e))):(p(t,r.parentNode),C(!1,e,r))},O=function(n,e,t){var r=t._onProps,o=t.props;t.props=e,r?P(n,t,r,o):A(n,t)},j=function(n,e,t,r){switch(e&&e.constructor){case Array:return D(n,t,e,r.xvdomContext)||r;case Object:return _(n,t,e,r);default:return g(n,t,r)}},w=function(n,e,t){var r=document.createDocumentFragment();return y(r,t,t.length),r.xvdomContext=n?e:r.appendChild(a("")),r},A=function(n,e){var t=V(e._instance,n(e));e._instance=t,t.$n.xvdom=e._parentInst},P=function(n,e,t,r){if(t){var o=t(e,r);o!==e.state&&(e.state=o,A(n,e))}},S=function(n,e,r,o,u,c){var i=new t,a={_onProps:c.onProps,_parentInst:r,props:e,bindSend:function(e){return i[e]||(i[e]=function(t){P(n,a,c[e],t)})}};return a.state=c.onInit(a),r[o]=O,r[u]=a,L(a._instance=n(a))},E=e.createNoStateComponent=function(n,e,t,r,o){return t[r]=N,L(t[o]=n(e))},I=e.createComponent=function(n,e,t,r,o,c){var i=e?S:E;return i(n,t||u,r,o,c,e)},L=function(n){var e=n.$s.c(n);return n.$n=e,e.xvdom=n,e},M=function(n){var e=n.$s,t=e.r.pop(n.key);return t?(e.u(n,t),t):(L(n),n)},T=e.render=function(n){return M(n).$n},V=function(n,e){return l(e,n)?n:(e=M(e),f(n.$n,e.$n),i(n),e)},B=e.rerender=function(n,e){return V(n.xvdom,e).$n},F=e.unmount=function(n){s(n.xvdom,n.parentNode)};e["default"]={createComponent:I,createDynamic:o,el:function(n){return document.createElement(n)},render:T,rerender:B,unmount:F,updateDynamic:j,Pool:r,DEADPOOL:c};e._={rerenderText:g,rerenderInstance:_,rerenderDynamic:C,rerenderArray:D}}])});
