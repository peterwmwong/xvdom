!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xvdom=e():n.xvdom=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){n.exports=t(1)},function(n,e){"use strict";function t(){}function r(){this.map=new t}e.__esModule=!0,t.prototype=Object.create(null);var o=new t,u=e.DEADPOOL={push:function(){},pop:function(){}};r.prototype.push=function(n){var e=n.key,t=this.map;n.$x=t[e],t[e]=n},r.prototype.pop=function(n){var e=this.map[n];if(e)return this.map[n]=e.$x,e};var c=function(n){n.$s.r.push(n)},i=function(n){return document.createTextNode(n)},a=function(){return i("")},f=function(n,e){var t=n.parentNode;t&&t.replaceChild(e,n)},s=function(n,e,t){return t?n.insertBefore(e,t):n.appendChild(e)},p=function(n,e){c(n),e.removeChild(n.$n)},d=function(n,e){for(var t=n.length,r=0;t>r;)p(n[r++],e)},v=function(n,e){for(var t=n.length,r=0;t>r;)c(n[r++]);e.textContent=""},l=function(n,e){return e.$s===n.$s&&(n.$s.u(n,e),!0)},m=function(n,e,t,r){for(var o=0;t>o;)s(n,(e[o]=T(e[o])).$n,r),++o},y=function(n,e,t){for(var r=0;t>r;)n.appendChild((e[r]=T(e[r])).$n),++r},$=function(n,e,t,r,o,u,c,i,a){for(var f=new Map,d=i.$n,v=void 0,l=void 0,m=void 0;a>=c;)v=t[c++],f.set(v.key,v);for(;o>=r;)m=e[r],l=m.key,v=f.get(l),v?(v===i&&(d=d.nextSibling),f["delete"](l),m=B(v,m)):m=T(m),e[r]=m,s(n,m.$n,d),++r;f.forEach(function(e){p(e,n)})},x=function(n,e,t,r,o,u,c,i,a,f,d,v){if(i>f)for(;u>=r;)o=e[r],s(n,(e[r]=T(o)).$n,v),++r;else if(r>u)for(;f>=i;)p(t[i++],n);else $(n,e,t,r,u,a,i,d,f)},h=function(n,e,t,r,o,u){var c=0,i=0,a=!0,f=e[0],p=r[0],d=u,v=void 0,l=void 0,m=void 0;t--,o--;n:for(;a&&o>=c&&t>=i;){for(a=!1;p.key===f.key;){if(e[i]=B(p,f),c++,i++,c>o||i>t)break n;p=r[c],f=e[i],a=!0}for(v=r[o],l=e[t];v.key===l.key;){if(d=(e[t]=B(v,l)).$n,o--,t--,c>o||i>t)break n;v=r[o],l=e[t],a=!0}for(;p.key===l.key;){if(m=(e[t]=B(p,l)).$n,v.key!==l.key&&(d=s(n,m,d)),c++,t--,c>o||i>t)break n;p=r[c],l=e[t],a=!0}for(;v.key===f.key;){if(s(n,(e[i]=B(v,f)).$n,p.$n),o--,i++,c>o||i>t)break n;v=r[o],f=e[i],a=!0}}(t>=i||o>=c)&&x(n,e,r,i,f,t,l,c,p,o,v,d)},k=function(n,e,t){var r=n.parentNode,o=e.length,u=t.length;o?u?h(r,e,o,t,u,n):m(r,e,o,n):d(t,r)},b=function(n,e,t){var r=e.length,o=t.length;r?o?h(n,e,r,t,o,null):y(n,e,r):v(t,n)},g=function(n,e,t){switch(e&&e.constructor){case String:case Number:case 0:return t.nodeValue=e,t;case Object:case Array:return C(n,e,t);default:return t.nodeValue="",t}},C=function(n,e,t){var r=A(n,t.parentNode,e);return f(t,r),r},_=function(n,e,t,r){return e&&l(e,t.$ri||t)?(e.$ri=t,r):C(n,e,r)},N=function(n,e,t,r,u){var c=n(e||o);l(c,t)||f(t.$n,(r[u]=T(c)).$n)},D=function(n,e,t,r){return e instanceof Array?void(n?b(r,e,t):k(r,e,t)):n?(v(t,r),r.appendChild(A(!0,r,e))):(d(t,r.parentNode),C(!1,e,r))},O=function(n,e,t){var r=t._onProps,o=t.props;t.props=e,r?S(n,t,r,o):P(n,t)},j=function(n,e,t,r){switch(e&&e.constructor){case Array:return D(n,t,e,r.xvdomContext)||r;case Object:return _(n,t,e,r);default:return g(n,t,r)}},w=function(n,e,t){var r=document.createDocumentFragment();return y(r,t,t.length),r.xvdomContext=n?e:r.appendChild(a()),r},A=function(n,e,t){switch(t&&t.constructor){case String:case Number:case 0:return i(t);case Object:return M(t);case Array:return w(n,e,t);default:return a()}},P=function(n,e){var t=B(e._instance,n(e));e._instance=t,t.$n.xvdom=e._parentInst},S=function(n,e,t,r){if(t){var o=t(e,r);o!==e.state&&(e.state=o,P(n,e))}},I=function(n,e,r,o,u,c){var i=new t,a={_onProps:c.onProps,_parentInst:r,props:e,bindSend:function(e){return i[e]||(i[e]=function(t){S(n,a,c[e],t)})}};return a.state=c.onInit(a),r[o]=O,r[u]=a,M(a._instance=n(a))},E=e.createNoStateComponent=function(n,e,t,r,o){return t[r]=N,M(t[o]=n(e))},L=e.createComponent=function(n,e,t,r,u,c){var i=e?I:E;return i(n,t||o,r,u,c,e)},M=function(n){var e=n.$s.c(n);return n.$n=e,e.xvdom=n,e},T=function(n){var e=n.$s,t=e.r.pop(n.key);return t?(e.u(n,t),t):(M(n),n)},V=e.render=function(n){return T(n).$n},B=function(n,e){return l(e,n)?n:(e=T(e),f(n.$n,e.$n),c(n),e)},F=e.rerender=function(n,e){return B(n.xvdom,e).$n},q=e.unmount=function(n){p(n.xvdom,n.parentNode)};e["default"]={createComponent:L,createDynamic:A,render:V,rerender:F,unmount:q,updateDynamic:j,Pool:r,DEADPOOL:u};e._={rerenderText:g,rerenderInstance:_,rerenderDynamic:C,rerenderArray:D}}])});
