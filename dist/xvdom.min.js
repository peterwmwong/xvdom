!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xvdom=e():n.xvdom=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){n.exports=t(1)},function(n,e){"use strict";function t(n){return n instanceof Object?n instanceof Array?"array":"object":null==n||n===!0||n===!1?"empty":"text"}function r(){}function o(){this.map=new r}function u(n,e,r){return B[t(r)](r,e,n)}e.__esModule=!0,r.prototype=Object.create(null);var i=new r,c=e.DEADPOOL={push:function(){},pop:function(){}};o.prototype.push=function(n){var e=n.key,t=this.map;n.$x=t[e],t[e]=n},o.prototype.pop=function(n){var e=this.map[n];if(e)return this.map[n]=e.$x,e};var f=function(n){n.$s.r.push(n)},a=function(n){return document.createTextNode(n)},p=function(){return a("")},d=function(n,e){var t=n.parentNode;t&&t.replaceChild(e,n)},s=function(n,e,t){return t?n.insertBefore(e,t):n.appendChild(e)},v=function(n,e){f(n),e.removeChild(n.$n)},l=function(n,e){for(var t=n.length,r=0;t>r;)v(n[r++],e)},m=function(n,e){for(var t=n.length,r=0;t>r;)f(n[r++]);e.textContent=""},y=function(n,e){return e.$s===n.$s&&(n.$s.u(n,e),!0)},x=function(n,e,t,r){for(var o=0;t>o;)s(n,(e[o]=T(e[o])).$n,r),++o},$=function(n,e,t){for(var r=0;t>r;)n.appendChild((e[r]=T(e[r])).$n),++r},h=function(n,e,t,r,o,u,i,c,f){for(var a=new Map,p=c.$n,d=void 0,l=void 0,m=void 0;f>=i;)d=t[i++],a.set(d.key,d);for(;o>=r;)m=e[r],l=m.key,d=a.get(l),d?(d===c&&(p=p.nextSibling),a["delete"](l),m=z(d,m)):m=T(m),e[r]=m,s(n,m.$n,p),++r;a.forEach(function(e){v(e,n)})},k=function(n,e,t,r,o,u,i,c,f,a,p,d){if(c>a)for(;u>=r;)o=e[r],s(n,(e[r]=T(o)).$n,d),++r;else if(r>u)for(;a>=c;)v(t[c++],n);else h(n,e,t,r,u,f,c,p,a)},b=function(n,e,t,r,o,u){var i=0,c=0,f=!0,a=e[0],p=r[0],d=u,v=void 0,l=void 0,m=void 0;t--,o--;n:for(;f&&o>=i&&t>=c;){for(f=!1;p.key===a.key;){if(e[c]=z(p,a),i++,c++,i>o||c>t)break n;p=r[i],a=e[c],f=!0}for(v=r[o],l=e[t];v.key===l.key;){if(d=(e[t]=z(v,l)).$n,o--,t--,i>o||c>t)break n;v=r[o],l=e[t],f=!0}for(;p.key===l.key;){if(m=(e[t]=z(p,l)).$n,v.key!==l.key&&(d=s(n,m,d)),i++,t--,i>o||c>t)break n;p=r[i],l=e[t],f=!0}for(;v.key===a.key;){if(s(n,(e[c]=z(v,a)).$n,p.$n),o--,c++,i>o||c>t)break n;v=r[o],a=e[c],f=!0}}(t>=c||o>=i)&&k(n,e,r,c,a,t,l,i,p,o,v,d)},C=function(n,e,t){var r=n.parentNode,o=e.length,u=t.length;o?u?b(r,e,o,t,u,n):x(r,e,o,n):l(t,r)},g=function(n,e,t){var r=e.length,o=t.length;r?o?b(n,e,r,t,o,null):$(n,e,r):m(t,n)},_=function(n,e,t){return n instanceof Object?j(t,n,e):(e.nodeValue=null==n||n===!0||n===!1?"":n,e)},j=function(n,e,t){var r=u(n,t.parentNode,e);return d(t,r),r},D=function(n,e,t,r){var o=void 0;return n&&y(n,o=r.$r||r)?(n.$r=o,e):j(t,n,e)},N=function(n,e,t,r,o){var u=n(e||i);y(u,t)||d(t.$n,(r[o]=T(u)).$n)},O=function(n,e,t,r){var o=e.xvdomContext;return n instanceof Array?(t?g(o,n,r):C(o,n,r),e):t?(m(r,o),o.appendChild(u(!0,o,n))):(l(r,o.parentNode),j(!1,n,o))},P=function(n,e,t){var r=t._onProps,o=t.props;t.props=e,r?E(n,t,r,o):w(n,t)},A=function(n,e,t){var r=document.createDocumentFragment();return $(r,n,n.length),r.xvdomContext=t?e:r.appendChild(a("")),r},w=function(n,e){var t=z(e._instance,n(e));e._instance=t,t.$n.xvdom=e._parentInst},E=function(n,e,t,r){if(t){var o=t(e,r);o!==e.state&&(e.state=o,w(n,e))}},I=function(n,e,t,o,u,i){var c=new r,f={_onProps:i.onProps,_parentInst:t,props:e,bindSend:function(e){return c[e]||(c[e]=function(t){E(n,f,i[e],t)})}};return f.state=i.onInit(f),t[o]=P,t[u]=f,M(f._instance=n(f))},S=e.createNoStateComponent=function(n,e,t,r,o){return t[r]=N,M(t[o]=n(e))},L=e.createComponent=function(n,e,t,r,o,u){var c=e?I:S;return c(n,t||i,r,o,u,e)},M=function(n){var e=n.$s.c(n);return n.$n=e,e.xvdom=n,e},T=function(n){var e=n.$s,t=e.r.pop(n.key);return t?(e.u(n,t),t):(M(n),n)},B={text:a,object:M,array:A,empty:p},F={text:_,object:D,array:O,empty:_},V=function(n,e,r,o){return F[t(e)](r,o,n,e)},q=e.render=function(n){return T(n).$n},z=function(n,e){return y(e,n)?n:(e=T(e),d(n.$n,e.$n),f(n),e)},G=e.rerender=function(n,e){return z(n.xvdom,e).$n},H=e.unmount=function(n){v(n.xvdom,n.parentNode)};e["default"]={createComponent:L,createDynamic:u,el:function(n){return document.createElement(n)},render:q,rerender:G,unmount:H,updateDynamic:V,Pool:o,DEADPOOL:c};e._={rerenderText:_,rerenderInstance:D,rerenderDynamic:j,rerenderArray:O}}])});
