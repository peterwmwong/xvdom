!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.xvdom=n():e.xvdom=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n){"use strict";function t(){}function r(){this.map=new t}function o(e,n,t){switch(n&&n.constructor){case String:case Number:case 0:return t.nodeValue=n,t;case Object:case Array:return j(e,n,t);default:return t.nodeValue="",t}}function u(e,n,t,r){switch(n&&n.constructor){case Array:return L(e,t,n,r.xvdomContext)||r;case Object:return M(e,t,n,r);default:return o(e,t,r)}}function c(e,n,t){var r=void 0;switch(t&&t.constructor){case String:case Number:case 0:r=m(t);break;case Object:case Array:throw"NOT IMPLEMENTED YET";default:r=m("")}e.push(r),G(n,r)}function i(e,n,t){c(e.contextNodes,e.curNode,t[e.dPtr++])}function a(e,n){c(e.contextNodes,e.curNode,n[e.sPtr++])}function d(e,n,t,r,o,u,c){for(var i=void 0,a=void 0;r--;)a=u[n.sPtr++],i=o>r?u[n.sPtr++]:c[n.dPtr++],null!=i&&(e[a]=i)}function f(e,n,t,r){var o=e.lastNode=G(e.curNode,document.createElement(h[r[e.i++]])),u=r[e.i++];u>0&&d(o,e,r,u,r[e.i++],n,t)}function s(){this.root=null}function p(e,n,t,r,o){r!==o&&(n[t[e>>16]]=r)}function l(e,n,t,r,o){if(r!==o)switch(r&&r.constructor){case String:case Number:case 0:console.log(n),n.textContent=r;break;case Object:case Array:throw"NOT IMPLEMENTED YET";default:node=m("")}}function v(e){var n=e.t,t=n.b,r=n.s,o=e.d,u=new s,c=t.length,i={i:0,sPtr:0,dPtr:0,curNode:u,lastNode:null,contextNodes:e.contextNodes=[]};do R[t[i.i++]](i,r,o,t);while(c>i.i);var a=u.root;return a.__xvdom=e,a}function x(e,n){for(var t=n.t,r=t.u,o=t.s,u=n.d,c=e.__xvdom,i=c.contextNodes,a=c.d,d=r.length,f=0,s=0,p=void 0;d>f;)q[r[f++]](p=r[f++],i[65535&p],o,u[s],a[s++])}n.__esModule=!0,n.xrender=v,n.xrerender=x;var h=n.REF_TO_TAG=["a","b","div","i","input","span","table","tbody","td","tr"];t.prototype=Object.create(null);var y=(new t,n.DEADPOOL={push:function(){},pop:function(){}});r.prototype.push=function(e){var n=e.key,t=this.map;e.$x=t[n],t[n]=e},r.prototype.pop=function(e){var n=this.map[e];if(n)return this.map[e]=n.$x,n};var N=function(e){e.$s.r.push(e)},m=function(e){return document.createTextNode(e)},$=function(e,n){var t=e.parentNode;t&&t.replaceChild(n,e)},b=function(e,n,t){return t?e.insertBefore(n,t):e.appendChild(n)},k=function(e,n){N(e),n.removeChild(e.$n)},g=function(e,n){for(var t=e.length,r=0;t>r;)k(e[r++],n)},E=function(e,n){for(var t=e.length,r=0;t>r;)N(e[r++]);n.textContent=""},O=function(e,n){return n.$s===e.$s&&(e.$s.u(e,n),!0)},P=function(e,n,t,r){for(var o=0;t>o;)b(e,(n[o]=I(n[o])).$n,r),++o},w=function(e,n,t){for(var r=0;t>r;)e.appendChild((n[r]=I(n[r])).$n),++r},C=function(e,n,t,r,o,u,c,i,a){for(var d=new Map,f=i.$n,s=void 0,p=void 0,l=void 0;a>=c;)s=t[c++],d.set(s.key,s);for(;o>=r;)l=n[r],p=l.key,s=d.get(p),s?(s===i&&(f=f.nextSibling),d["delete"](p),l=Y(s,l)):l=I(l),n[r]=l,b(e,l.$n,f),++r;d.forEach(function(n){k(n,e)})},T=function(e,n,t,r,o,u,c,i,a,d,f,s){if(i>d)for(;u>=r;)o=n[r],b(e,(n[r]=I(o)).$n,s),++r;else if(r>u)for(;d>=i;)k(t[i++],e);else C(e,n,t,r,u,a,i,f,d)},A=function(e,n,t,r,o,u){var c=0,i=0,a=!0,d=n[0],f=r[0],s=u,p=void 0,l=void 0,v=void 0;t--,o--;e:for(;a&&o>=c&&t>=i;){for(a=!1;f.key===d.key;){if(n[i]=Y(f,d),c++,i++,c>o||i>t)break e;f=r[c],d=n[i],a=!0}for(p=r[o],l=n[t];p.key===l.key;){if(s=(n[t]=Y(p,l)).$n,o--,t--,c>o||i>t)break e;p=r[o],l=n[t],a=!0}for(;f.key===l.key;){if(v=(n[t]=Y(f,l)).$n,p.key!==l.key&&(s=b(e,v,s)),c++,t--,c>o||i>t)break e;f=r[c],l=n[t],a=!0}for(;p.key===d.key;){if(b(e,(n[i]=Y(p,d)).$n,f.$n),o--,i++,c>o||i>t)break e;p=r[o],d=n[i],a=!0}}(t>=i||o>=c)&&T(e,n,r,i,d,t,l,c,f,o,p,s)},D=function(e,n,t){var r=e.parentNode,o=n.length,u=t.length;o?u?A(r,n,o,t,u,e):P(r,n,o,e):g(t,r)},_=function(e,n,t){var r=n.length,o=t.length;r?o?A(e,n,r,t,o,null):w(e,n,r):E(t,e)},j=function(e,n,t){var r=i(e,t.parentNode,n);return $(t,r),r},M=function(e,n,t,r){var o=void 0;return n&&O(n,o=t.$r||t)?(n.$r=o,r):j(e,n,r)},L=function(e,n,t,r){return n instanceof Array?void(e?_(r,n,t):D(r,n,t)):e?(E(t,r),r.appendChild(i(!0,r,n))):(g(t,r.parentNode),j(!1,n,r))},S=function(e){var n=e.$s.c(e);return e.$n=n,n.xvdom=e,n},I=function(e){var n=e.$s,t=n.r.pop(e.key);return t?(n.u(e,t),t):(S(e),e)},V=n.render=function(e){return I(e).$n},Y=function(e,n){return O(n,e)?e:(n=I(n),$(e.$n,n.$n),N(e),n)},B=n.rerender=function(e,n){return Y(e.xvdom,n).$n},F=n.unmount=function(e){k(e.xvdom,e.parentNode)},G=function(e,n){return e.appendChild(n)};s.prototype.appendChild=function(e){return this.root=e};var R=[f,function(){},i,a,function(e){e.curNode=e.lastNode},function(e){e.curNode=e.curNode.parentNode},function(e){e.contextNodes.push(e.lastNode)}],q=[p,l];n["default"]={createDynamic:i,el:function(e){return document.createElement(e)},render:V,rerender:B,xrender:v,xrerender:x,unmount:F,updateDynamic:u,Pool:r,DEADPOOL:y};n._={rerenderText:o,rerenderInstance:M,rerenderDynamic:j,rerenderArray:L}}])});
