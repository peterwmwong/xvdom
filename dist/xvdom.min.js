!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xvdom=t():n.xvdom=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){n.exports=e(1)},function(n,t){"use strict";function e(n){return n instanceof Object?n instanceof Array?"array":"object":P(n)?"empty":"text"}function r(){}function o(){this.map=new r}function i(n,t){E(n),t.removeChild(n.$n)}function u(n,t,e){for(;e<n.length;)i(n[e++],t)}function c(n,t){for(var e=0;e<n.length;)E(n[e++]);t.textContent=""}function s(n,t){return n.$s===t.$s&&(t.$s.u(t,n),!0)}function p(n,t,e,r){null===r?f(n,t,e):a(n,t,e,r)}function a(n,t,e,r){for(;e<t.length;)n.insertBefore((t[e]=j(t[e])).$n,r),++e}function f(n,t,e){for(;e<t.length;)n.appendChild((t[e]=j(t[e])).$n),++e}function d(n,t,e){var r=document.createDocumentFragment(),o=D(n,r,t);return S(e,r),o}function h(n,t,e,r){for(var o=0;o<t.length&&o<e.length;o++)t[o]=O(e[o],t[o]);o<t.length?p(n,t,o,r):u(e,n,o)}function l(n,t,e){e.length?t.length?h(n,t,e,null):c(e,n):f(n,t,0)}function m(n,t,e,r){return n instanceof Array?(e?l(t,n,r):h(t.parentNode,n,r,t),t):e?(c(r,t),D(!0,t,n)):(u(r,t.parentNode,0),d(!1,n,t))}function v(n,t,e){return n instanceof Object?d(e,n,t):(t.nodeValue=P(n)?"":n,t)}function x(n,t,e,r){var o=void 0;return n&&s(o=r.$r||r,n)?(n.$r=o,t):d(e,n,t)}function y(n,t,e,o){this._boundActions=new r,this._parentInst=e,this.actions=o,this.props=t,this.render=n,this.bindSend=this.bindSend.bind(this),this.state=o.onInit(this),this.$n=g(this._instance=n(this))}function $(n,t,e,r){return new y(n,t,e,r)}function b(n,t){var e=n(t);return g(e),e}function C(n,t,e,r){var o=(t?$:b)(n,e||N,r,t);return o}function _(n,t,e,r){var o=t?r.updateProps(e):O(r,n(e));return o}function g(n){var t=n.$s.c(n);return n.$n=t,t.xvdom=n,t}function j(n){var t=n.$s,e=t.r.pop(n.key);return e?(t.u(n,e),e):(g(n),n)}function D(n,t,r){return k[e(r)](t,r,n)}function A(n,t,r,o){return L[e(t)](r,o,n,t)}function O(n,t){return s(n,t)?n:(S(n.$n,(t=j(t)).$n),E(n),t)}t.__esModule=!0,t.createComponent=C;var P=function(n){return null==n||n===!0||n===!1},N={},w=t.DEADPOOL={push:function(){},pop:function(){}};r.prototype=Object.create(null),o.prototype.push=function(n){var t=n.key,e=this.map;n.$x=e[t],e[t]=n},o.prototype.pop=function(n){var t=this.map[n];if(t)return this.map[n]=t.$x,t};var E=function(n){n.$s.r.push(n)},I=function(n){return document.createTextNode(n)},S=function(n,t){var e=n.parentNode;e&&e.replaceChild(t,n)};y.prototype.updateProps=function(n){var t=this.props;return this.props=n,this.actions.onProps?this.send("onProps",t):this.rerender(),this},y.prototype.bindSend=function(n){return this._boundActions[n]||(this._boundActions[n]=this.send.bind(this,n))},y.prototype.send=function(n,t){var e=void 0,r=this.actions[n];r&&(e=r(this,t))!=this.state&&(this.state=e,this.rerender())},y.prototype.rerender=function(){var n=O(this._instance,this.render(this));this._instance=n,n.$n.xvdom=this._parentInst};var k={text:function(n,t){return n.appendChild(I(t))},empty:function(n){return n.appendChild(I(""))},object:function(n,t){return n.appendChild(g(t))},array:function(n,t,e){return f(n,t,0),e?n:n.appendChild(I(""))}},L={text:v,object:x,array:m,empty:v},T=t.render=function(n){return j(n).$n},B=t.rerender=function(n,t){return O(n.xvdom,t).$n},F=t.unmount=function(n){i(n.xvdom,n.parentNode)};t.default={createComponent:C,createDynamic:D,el:function(n){return document.createElement(n)},render:T,rerender:B,unmount:F,updateComponent:_,updateDynamic:A,Pool:o,DEADPOOL:w};t._={rerenderText:v,rerenderDynamic:d}}])});
