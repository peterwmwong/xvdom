!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.xvdom=e():n.xvdom=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="",e(0)}([function(n,e,t){n.exports=t(1)},function(n,e){"use strict";function t(){}function r(){this.map=new t}e.__esModule=!0,t.prototype=Object.create(null);var o=new t,u=document.createComment(""),i=e.DEADPOOL={push:function(){},pop:function(){}};r.prototype.push=function(n){var e=n.key,t=this.map;n.$x=t[e],t[e]=n},r.prototype.pop=function(n){var e=this.map[n];if(e)return this.map[n]=e.$x,e};var c=function(n){n.$s.r.push(n)},f=function(){return u.cloneNode(!1)},a=function(n,e){var t=n.parentNode;t&&t.replaceChild(e,n)},p=function(n,e,t){return t?n.insertBefore(e,t):n.appendChild(e)},d=function(n,e){c(n),e.removeChild(n.$n)},s=function(n,e){for(var t=n.length,r=0;t>r;)d(n[r++],e)},l=function(n,e){for(var t=n.length,r=0;t>r;)c(n[r++]);e.textContent=""},v=function(n,e){return e.$s===n.$s&&(n.$s.u(n,e),!0)},m=function(n,e,t,r){for(var o=0;t>o;)p(n,(e[o]=B(e[o])).$n,r),++o},y=function(n,e,t){for(var r=0;t>r;)n.appendChild((e[r]=B(e[r])).$n),++r},$=function(n,e,t,r,o,u,i,c,f){for(var a=new Map,s=c.$n,l=void 0,v=void 0,m=void 0;f>=i;)l=t[i++],a.set(l.key,l);for(;o>=r;)m=e[r],v=m.key,l=a.get(v),l?(l===c&&(s=s.nextSibling),a["delete"](v),m=M(l,m)):m=B(m),e[r]=m,p(n,m.$n,s),++r;a.forEach(function(e){d(e,n)})},h=function(n,e,t,r,o,u,i,c,f,a,s,l){if(c>a)for(;u>=r;)o=e[r],p(n,(e[r]=B(o)).$n,l),++r;else if(r>u)for(;a>=c;)d(t[c++],n);else $(n,e,t,r,u,f,c,s,a)},x=function(n,e,t,r,o,u){var i=0,c=0,f=!0,a=e[0],d=r[0],s=u,l=void 0,v=void 0,m=void 0;t--,o--;n:for(;f&&o>=i&&t>=c;){for(f=!1;d.key===a.key;){if(e[c]=M(d,a),i++,c++,i>o||c>t)break n;d=r[i],a=e[c],f=!0}for(l=r[o],v=e[t];l.key===v.key;){if(s=(e[t]=M(l,v)).$n,o--,t--,i>o||c>t)break n;l=r[o],v=e[t],f=!0}for(;d.key===v.key;){if(m=(e[t]=M(d,v)).$n,l.key!==v.key&&(s=p(n,m,s)),i++,t--,i>o||c>t)break n;d=r[i],v=e[t],f=!0}for(;l.key===a.key;){if(p(n,(e[c]=M(l,a)).$n,d.$n),o--,c++,i>o||c>t)break n;l=r[o],a=e[c],f=!0}}(t>=c||o>=i)&&h(n,e,r,c,a,t,v,i,d,o,l,s)},k=function(n,e,t){var r=n.parentNode,o=e.length,u=t.length;o?u?x(r,e,o,t,u,n):m(r,e,o,n):s(t,r)},b=function(n,e,t){var r=e.length,o=t.length;r?o?x(n,e,r,t,o,null):y(n,e,r):l(t,n)},g=function(n,e,t,r,o,u,i){return null==e?r.nodeValue="":e.constructor===String||e.constructor===Number?r.nodeValue=e:C(n,e,null,r,o,u,i),e},C=function(n,e,t,r,o,u,i){return a(r,P(n,r.parentNode,e,o,u,i)),e},N=function(n,e,t,r,o,u,i){return e&&v(e,t)?t:C(n,e,null,r,o,u,i)},_=function(n,e,t,r,u){var i=n(e||o);v(i,t)||a(t.$n,(r[u]=B(i)).$n)},D=function(n,e,t,r,o,u,i){return e instanceof Array?n?b(r,e,t):k(r,e,t):n?(l(t,r),r.appendChild(P(!0,r,e,o,u,i))):(s(t,r.parentNode),C(!1,e,null,r,o,u,i)),e},O=function(n,e,t){var r=t._onProps,o=t.props;t.props=e,r?A(n,t,r,o):j(n,t)},P=e.createDynamic=function(n,e,t,r,o,u){var i=void 0,c=void 0,a=void 0,p=void 0;return null==t||(p=t.constructor)===Boolean?(a=C,c=i=f()):p===Object?(a=N,c=i=E(t)):p===String||p===Number?(a=g,c=i=document.createTextNode(t)):p===Array&&(i=document.createDocumentFragment(),y(i,t,t.length),a=D,c=n?e:i.appendChild(f())),r[o]=a,r[u]=c,i},j=function(n,e){var t=M(e._instance,n(e));e._instance=t,t.$n.xvdom=e._parentInst},A=function(n,e,t,r){if(t){var o=t(e,r);o!==e.state&&(e.state=o,j(n,e))}},S=function(n,e,r,o,u,i){var c=new t,f={_onProps:i.onProps,_parentInst:r,props:e,bindSend:function(e){return c[e]||(c[e]=function(t){A(n,f,i[e],t)})}};return f.state=i.onInit(f),r[o]=O,r[u]=f,E(f._instance=n(f))},w=e.createNoStateComponent=function(n,e,t,r,o){return t[r]=_,E(t[o]=n(e))},I=e.createComponent=function(n,e,t,r,u,i){var c=e?S:w;return c(n,t||o,r,u,i,e)},E=function(n){var e=n.$s.c(n);return n.$n=e,e.xvdom=n,e},B=function(n){var e=n.$s,t=e.r.pop(n.key);return t?(e.u(n,t),t):(E(n),n)},L=e.render=function(n){return B(n).$n},M=function(n,e){return v(e,n)?n:(e=B(e),a(n.$n,e.$n),c(n),e)},T=e.rerender=function(n,e){return M(n.xvdom,e).$n},V=e.unmount=function(n){d(n.xvdom,n.parentNode)};e["default"]={createDynamic:P,createComponent:I,render:L,rerender:T,unmount:V,Pool:r,DEADPOOL:i};e._={rerenderText:g,rerenderInstance:N,rerenderDynamic:C,rerenderArray:D}}])});
