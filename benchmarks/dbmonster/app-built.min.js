!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n,e){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=e(2),a=e(3),o=i(a),s=e(4),u=o.default.createDynamic,c=o.default.el,d=o.default.updateDynamic,l={c:function(t){var n,e=c("table");return e.className="table table-striped latest-data",n=c("tbody"),n.appendChild(t.b=u(!0,n,t.a)),e.appendChild(n),e},u:function(t,n){t.a!==n.a&&(n.b=d(!0,n.a,n.a=t.a,n.b))},r:o.default.DEADPOOL},p={c:function(t){var n,e,i=c("tr");return n=c("td"),n.className="dbname",n.appendChild(t.b=u(!0,n,t.a)),i.appendChild(n),n=c("td"),n.className="query-count",e=c("span"),t.d=e,e.className=t.c,e.appendChild(t.f=u(!0,e,t.e)),n.appendChild(e),i.appendChild(n),i.appendChild(t.h=u(!1,i,t.g)),i},u:function(t,n){var e;t.a!==n.a&&(n.b=d(!0,n.a,n.a=t.a,n.b)),e=t.c,e!==n.c&&(n.d.className=e,n.c=e),t.e!==n.e&&(n.f=d(!0,n.e,n.e=t.e,n.f)),t.g!==n.g&&(n.h=d(!1,n.g,n.g=t.g,n.h))},r:o.default.DEADPOOL},h={c:function(t){var n,e,i=c("td");return t.b=i,i.className=t.a,i.appendChild(t.d=u(!1,i,t.c)),n=c("div"),n.className="popover left",e=c("div"),e.className="popover-content",e.appendChild(t.f=u(!0,e,t.e)),n.appendChild(e),e=c("div"),e.className="arrow",n.appendChild(e),i.appendChild(n),i},u:function(t,n){var e;e=t.a,e!==n.a&&(n.b.className=e,n.a=e),t.c!==n.c&&(n.d=d(!1,n.c,n.c=t.c,n.d)),t.e!==n.e&&(n.f=d(!0,n.e,n.e=t.e,n.f))},r:o.default.DEADPOOL},f=.5,m=new s.DatabaseList(50),v=function(t){return t.toFixed(2)},y=function(t){return t>=20?"label label-important":t>=10?"label label-warning":"label label-success"},x=function(t){return t>=20?"Query elapsed warn_long":t>=10?"Query elapsed warn":"Query elapsed short"},g=function(t,n){for(var e=t.length,i=new Array(e),r=0;r<e;)i[r]=n(t[r],r),++r;return i},b=function(t,n){var e=t.elapsed,i=t.query;return{$s:h,a:x(e),c:v(e),e:i,key:n}},w=function(t,n){var e=t.queries.length;return{$s:p,a:t.name,c:y(e),e:e,g:g(t.getTopFiveQueries(),b),key:n}},C=function(t){return{$s:l,a:g(t,w)}},M=void 0;(0,r.startFPSMonitor)(),(0,r.initProfiler)("data"),(0,r.initProfiler)("view");var P=function t(){(0,r.startProfile)("data"),m.randomUpdate(f),(0,r.endProfile)("data"),(0,r.startProfile)("view"),o.default.rerender(M,C(m.dbs)),(0,r.endProfile)("view"),requestAnimationFrame(t)};window.app.appendChild(M=o.default.render(C(m.dbs))),requestAnimationFrame(P)},function(t,n){"use strict";function e(t){h||(t.container&&(p=t.container),h=!0)}function i(){p||(p=document.createElement("div"),p.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(p)),h=!0}function r(t){f.push(t),m===-1&&requestAnimationFrame(function(t){m=-1;var n=f;f=[];for(var e=0;e<n.length;e++)n[e]()})}function a(){function t(i){var o=(i-(0===a?i:a))/1e3,s=1/o;if(s!==1/0){64===r.length&&r.shift(),r.push(s);for(var u=0,c=0;c<r.length;c++)u+=r[c];var d=u/r.length;n.addSample(d),e.addResult(n.calc())}a=i,requestAnimationFrame(t)}i();var n=new y,e=new x("FPS","",39);p.appendChild(e.element);var r=[],a=0;requestAnimationFrame(t)}function o(){if(i(),void 0!==performance.memory){var t,n,e;!function(){var i=function i(){t.addSample(Math.round(e.usedJSHeapSize/1048576)),n.addResult(t.calc()),setTimeout(i,30)};t=new y,n=new x("Memory","MB",5),p.appendChild(n.element),e=performance.memory,i()}()}}function s(t){var n=b[t];void 0!==n&&(n.startTime=performance.now())}function u(t){var n=performance.now(),e=b[t];void 0!==e&&(e.data.addSample(n-e.startTime),e.widget.addResult(e.data.calc()))}function c(t){i();var n=b[t];void 0===n&&(b[t]=n=new g(t,"ms"),p.appendChild(n.widget.element))}var d=30,l=100,p=null,h=!1,f=[],m=-1;n.initPerfMonitor=e;var v=function(){function t(t,n,e,i){this.min=t,this.max=n,this.mean=e,this.now=i}return t}(),y=function(){function t(){this.samples=[],this.maxSamples=l}return t.prototype.addSample=function(t){this.samples.length===this.maxSamples&&this.samples.shift(),this.samples.push(t)},t.prototype.calc=function(){for(var t=this.samples[0],n=this.samples[0],e=0,i=0;i<this.samples.length;i++){var r=this.samples[i];r<t&&(t=r),r>n&&(n=r),e+=r}var a=this.samples[this.samples.length-1],o=e/this.samples.length;return new v(t,n,o,a)},t}(),x=function(){function t(t,n,e){var i=this;void 0===e&&(e=0),this._syncView=function(){var t=i.results[i.results.length-1],n=d/(1.2*t.max),e=0===(32&i.flags)?t.min.toFixed(2):""+Math.round(t.min),r=0===(32&i.flags)?t.max.toFixed(2):""+Math.round(t.max),a=0===(32&i.flags)?t.mean.toFixed(2):""+Math.round(t.mean),o=0===(32&i.flags)?t.now.toFixed(2):""+Math.round(t.now);if(i.text.innerHTML=""+(0===(1&i.flags)?"<div>min: &nbsp;"+e+i.unitName+"</div>":"")+(0===(2&i.flags)?"<div>max: &nbsp;"+r+i.unitName+"</div>":"")+(0===(4&i.flags)?"<div>mean: "+a+i.unitName+"</div>":"")+(0===(8&i.flags)?"<div>now: &nbsp;"+o+i.unitName+"</div>":""),0===(16&i.flags)){i.ctx.fillStyle="#010",i.ctx.fillRect(0,0,l,d),i.ctx.fillStyle="#0f0";for(var s=0;s<i.results.length;s++)i.ctx.fillRect(s,d,1,-(i.results[s].now*n))}i._dirty=!1},this.name=t,this.unitName=n,this.flags=e,this.results=[],this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this.label=document.createElement("div"),this.label.style.cssText="text-align: center",this.label.textContent=this.name,this.text=document.createElement("div"),this.element.appendChild(this.label),this.element.appendChild(this.text),0===(16&e)?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=l,this.canvas.height=d,this.ctx=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):(this.canvas=null,this.ctx=null),this._dirty=!1}return t.prototype.addResult=function(t){this.results.length===l&&this.results.shift(),this.results.push(t),this.invalidate()},t.prototype.invalidate=function(){this._dirty||(this._dirty=!0,r(this._syncView))},t}();n.startFPSMonitor=a,n.startMemMonitor=o;var g=function(){function t(t,n){this.data=new y,this.widget=new x(t,n),this.startTime=0}return t}(),b={};n.startProfile=s,n.endProfile=u,n.initProfiler=c},function(t,n,e){"use strict";!function(n,e){t.exports=e()}(void 0,function(){return function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n){function e(t){return t instanceof Object?t instanceof Array?"array":"object":F(t)?"empty":"text"}function i(){}function r(){this.map=new i}function a(t,n){E(t),n.removeChild(t.$n)}function o(t,n,e){for(;e<t.length;)a(t[e++],n)}function s(t,n){for(var e=0;e<t.length;)E(t[e++]);n.textContent=""}function u(t,n){return t.$s===n.$s&&(n.$s.u(n,t),!0)}function c(t,n,e,i){null==i?l(t,n,e):d(t,n,e,i)}function d(t,n,e,i){for(;e<n.length;)t.insertBefore((n[e]=$(n[e])).$n,i),++e}function l(t,n,e){for(;e<n.length;)t.appendChild((n[e]=$(n[e])).$n),++e}function p(t,n,e,i){for(var r=0;r<n.length&&r<e.length;r++)n[r]=D(e[r],n[r]);r<n.length?c(t,n,r,i):o(e,t,r)}function h(t,n,e){n.length?e.length?p(t,n,e,null):l(t,n,0):s(e,t)}function f(t,n,e){var i=_(t,e.parentNode,n);return q(e,i),i}function m(t,n,e){return t instanceof Object?f(e,t,n):(n.nodeValue=F(t)?"":t,n)}function v(t,n,e,i){var r=void 0;return t&&u(r=i.$r||i,t)?(t.$r=r,n):f(e,t,n)}function y(t,n,e,i){var r=n.xvdomContext;return t instanceof Array?(e?h(r,t,i):p(r.parentNode,t,i,r),n):e?(s(i,r),r.appendChild(_(!0,r,t))):(o(i,r.parentNode,0),f(!1,t,r))}function x(t,n,e){var i=document.createDocumentFragment();return l(i,t,0),i.xvdomContext=e?n:i.appendChild(T("")),i}function g(t,n,e,r){this._boundActions=new i,this._parentInst=e,this.actions=r,this.props=n,this.render=t,this.bindSend=this.bindSend.bind(this),this.state=r.onInit(this),this.$n=P(this._instance=t(this))}function b(t,n,e,i){return new g(t,n,e,i)}function w(t,n){var e=t(n);return P(e),e}function C(t,n,e,i){var r=(n?b:w)(t,e||S,i,n);return r}function M(t,n,e,i){var r=n?i.updateProps(e):D(i,t(e));return r}function P(t){var n=t.$s.c(t);return t.$n=n,n.xvdom=t,n}function $(t){var n=t.$s,e=n.r.pop(t.key);return e?(n.u(t,e),e):(P(t),t)}function _(t,n,i){return L[e(i)](i,n,t)}function N(t,n,i,r){return R[e(n)](i,r,t,n)}function D(t,n){return u(t,n)?t:(q(t.$n,(n=$(n)).$n),E(t),n)}n.__esModule=!0,n.createComponent=C;var F=function(t){return null==t||t===!0||t===!1},S={},A=n.DEADPOOL={push:function(){},pop:function(){}};i.prototype=Object.create(null),r.prototype.push=function(t){var n=t.key,e=this.map;t.$x=e[n],e[n]=t},r.prototype.pop=function(t){var n=this.map[t];if(n)return this.map[t]=n.$x,n};var E=function(t){t.$s.r.push(t)},T=function(t){return document.createTextNode(t)},O=function(){return T("")},q=function(t,n){var e=t.parentNode;e&&e.replaceChild(n,t)};g.prototype.updateProps=function(t){var n=this.props;return this.props=t,this.actions.onProps?this.send("onProps",n):this.rerender(),this},g.prototype.bindSend=function(t){return this._boundActions[t]||(this._boundActions[t]=this.send.bind(this,t))},g.prototype.send=function(t,n){var e=void 0,i=this.actions[t];i&&(e=i(this,n))!=this.state&&(this.state=e,this.rerender())},g.prototype.rerender=function(){var t=D(this._instance,this.render(this));this._instance=t,t.$n.xvdom=this._parentInst};var L={text:T,object:P,array:x,empty:O},R={text:m,object:v,array:y,empty:m},j=n.render=function(t){return $(t).$n},k=n.rerender=function(t,n){return D(t.xvdom,n).$n},Q=n.unmount=function(t){a(t.xvdom,t.parentNode)};n.default={createComponent:C,createDynamic:_,el:function(t){return document.createElement(t)},render:j,rerender:k,unmount:Q,updateComponent:M,updateDynamic:N,Pool:r,DEADPOOL:A},n._={rerenderText:m,rerenderDynamic:f}}])})},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=n.Query=function(){function t(n,i){e(this,t),this.elapsed=n,this.query=i}return t.rand=function(){var n=15*Math.random(),e=void 0;return e=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something",new t(n,e)},t}(),r=new i(0,""),a=0,o=n.DB=function(){function t(n){e(this,t),this.id=a++,this.name=n,this.queries=null,this.update()}return t.prototype.update=function(){for(var t=[],n=Math.floor(10*Math.random()+1),e=0;e<n;e++)t.push(i.rand());this.queries=t},t.prototype.getTopFiveQueries=function(){var t=this.queries.slice();for(t.sort(function(t,n){return t.elapsed-n.elapsed}),t=t.slice(0,5);t.length<5;)t.push(r);return t},t}();n.DatabaseList=function(){function t(n){e(this,t),this.dbs=[];for(var i=0;i<n;i++)this.dbs.push(new o("cluster"+i)),this.dbs.push(new o("cluster"+i+"slave"))}return t.prototype.update=function(){for(var t=this.dbs,n=0;n<t.length;n++)t[n]=new o(t[n].name)},t.prototype.randomUpdate=function(t){for(var n=this.dbs,e=0;e<n.length;e++)Math.random()<t&&(n[e]=new o(n[e].name))},t}()}]);
