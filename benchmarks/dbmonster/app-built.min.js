!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=e(2),a=e(3),o=r(a),s=e(4),u=o.default.createDynamic,c=o.default.el,d=o.default.updateDynamic,l={c:function(t){var n,e=c("table");return e.className="table table-striped latest-data",n=c("tbody"),t.b=u(!0,n,t.a),e.appendChild(n),e},u:function(t,n){t.a!==n.a&&(n.b=d(!0,n.a,n.a=t.a,n.b))},r:o.default.DEADPOOL},f={c:function(t){var n,e,r=c("tr");return n=c("td"),n.className="dbname",t.b=u(!0,n,t.a),r.appendChild(n),n=c("td"),n.className="query-count",e=c("span"),t.d=e,e.className=t.c,t.f=u(!0,e,t.e),n.appendChild(e),r.appendChild(n),t.h=u(!1,r,t.g),r},u:function(t,n){var e;t.a!==n.a&&(n.b=d(!0,n.a,n.a=t.a,n.b)),e=t.c,e!==n.c&&(n.d.className=e,n.c=e),t.e!==n.e&&(n.f=d(!0,n.e,n.e=t.e,n.f)),t.g!==n.g&&(n.h=d(!1,n.g,n.g=t.g,n.h))},r:o.default.DEADPOOL},h={c:function(t){var n,e,r=c("td");return t.b=r,r.className=t.a,t.d=u(!1,r,t.c),n=c("div"),n.className="popover left",e=c("div"),e.className="popover-content",t.f=u(!0,e,t.e),n.appendChild(e),e=c("div"),e.className="arrow",n.appendChild(e),r.appendChild(n),r},u:function(t,n){var e;e=t.a,e!==n.a&&(n.b.className=e,n.a=e),t.c!==n.c&&(n.d=d(!1,n.c,n.c=t.c,n.d)),t.e!==n.e&&(n.f=d(!0,n.e,n.e=t.e,n.f))},r:o.default.DEADPOOL},p=.5,m=new s.DatabaseList(50),v=function(t){return t.toFixed(2)},y=function(t){return t>=20?"label label-important":t>=10?"label label-warning":"label label-success"},g=function(t){return t>=20?"Query elapsed warn_long":t>=10?"Query elapsed warn":"Query elapsed short"},x=function(t,n){for(var e=t.length,r=new Array(e),i=0;i<e;)r[i]=n(t[i],i),++i;return r},b=function(t,n){var e=t.elapsed,r=t.query;return{$s:h,a:g(e),c:v(e),e:r,key:n}},w=function(t,n){var e=t.queries.length;return{$s:f,a:t.name,c:y(e),e:e,g:x(t.getTopFiveQueries(),b),key:n}},C=function(t){return{$s:l,a:x(t,w)}},M=void 0;(0,i.startFPSMonitor)(),(0,i.initProfiler)("data"),(0,i.initProfiler)("view");var P=function t(){(0,i.startProfile)("data"),m.randomUpdate(p),(0,i.endProfile)("data"),(0,i.startProfile)("view"),o.default.rerender(M,C(m.dbs)),(0,i.endProfile)("view"),requestAnimationFrame(t)};window.app.appendChild(M=o.default.render(C(m.dbs))),requestAnimationFrame(P)},function(t,n){"use strict";function e(t){h||(t.container&&(f=t.container),h=!0)}function r(){f||(f=document.createElement("div"),f.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(f)),h=!0}function i(t){p.push(t),m===-1&&requestAnimationFrame(function(t){m=-1;var n=p;p=[];for(var e=0;e<n.length;e++)n[e]()})}function a(){function t(r){var o=(r-(0===a?r:a))/1e3,s=1/o;if(s!==1/0){64===i.length&&i.shift(),i.push(s);for(var u=0,c=0;c<i.length;c++)u+=i[c];var d=u/i.length;n.addSample(d),e.addResult(n.calc())}a=r,requestAnimationFrame(t)}r();var n=new y,e=new g("FPS","",39);f.appendChild(e.element);var i=[],a=0;requestAnimationFrame(t)}function o(){if(r(),void 0!==performance.memory){var t,n,e;!function(){var r=function r(){t.addSample(Math.round(e.usedJSHeapSize/1048576)),n.addResult(t.calc()),setTimeout(r,30)};t=new y,n=new g("Memory","MB",5),f.appendChild(n.element),e=performance.memory,r()}()}}function s(t){var n=b[t];void 0!==n&&(n.startTime=performance.now())}function u(t){var n=performance.now(),e=b[t];void 0!==e&&(e.data.addSample(n-e.startTime),e.widget.addResult(e.data.calc()))}function c(t){r();var n=b[t];void 0===n&&(b[t]=n=new x(t,"ms"),f.appendChild(n.widget.element))}var d=30,l=100,f=null,h=!1,p=[],m=-1;n.initPerfMonitor=e;var v=function(){function t(t,n,e,r){this.min=t,this.max=n,this.mean=e,this.now=r}return t}(),y=function(){function t(){this.samples=[],this.maxSamples=l}return t.prototype.addSample=function(t){this.samples.length===this.maxSamples&&this.samples.shift(),this.samples.push(t)},t.prototype.calc=function(){for(var t=this.samples[0],n=this.samples[0],e=0,r=0;r<this.samples.length;r++){var i=this.samples[r];i<t&&(t=i),i>n&&(n=i),e+=i}var a=this.samples[this.samples.length-1],o=e/this.samples.length;return new v(t,n,o,a)},t}(),g=function(){function t(t,n,e){var r=this;void 0===e&&(e=0),this._syncView=function(){var t=r.results[r.results.length-1],n=d/(1.2*t.max),e=0===(32&r.flags)?t.min.toFixed(2):""+Math.round(t.min),i=0===(32&r.flags)?t.max.toFixed(2):""+Math.round(t.max),a=0===(32&r.flags)?t.mean.toFixed(2):""+Math.round(t.mean),o=0===(32&r.flags)?t.now.toFixed(2):""+Math.round(t.now);if(r.text.innerHTML=""+(0===(1&r.flags)?"<div>min: &nbsp;"+e+r.unitName+"</div>":"")+(0===(2&r.flags)?"<div>max: &nbsp;"+i+r.unitName+"</div>":"")+(0===(4&r.flags)?"<div>mean: "+a+r.unitName+"</div>":"")+(0===(8&r.flags)?"<div>now: &nbsp;"+o+r.unitName+"</div>":""),0===(16&r.flags)){r.ctx.fillStyle="#010",r.ctx.fillRect(0,0,l,d),r.ctx.fillStyle="#0f0";for(var s=0;s<r.results.length;s++)r.ctx.fillRect(s,d,1,-(r.results[s].now*n))}r._dirty=!1},this.name=t,this.unitName=n,this.flags=e,this.results=[],this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this.label=document.createElement("div"),this.label.style.cssText="text-align: center",this.label.textContent=this.name,this.text=document.createElement("div"),this.element.appendChild(this.label),this.element.appendChild(this.text),0===(16&e)?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=l,this.canvas.height=d,this.ctx=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):(this.canvas=null,this.ctx=null),this._dirty=!1}return t.prototype.addResult=function(t){this.results.length===l&&this.results.shift(),this.results.push(t),this.invalidate()},t.prototype.invalidate=function(){this._dirty||(this._dirty=!0,i(this._syncView))},t}();n.startFPSMonitor=a,n.startMemMonitor=o;var x=function(){function t(t,n){this.data=new y,this.widget=new g(t,n),this.startTime=0}return t}(),b={};n.startProfile=s,n.endProfile=u,n.initProfiler=c},function(t,n,e){"use strict";!function(n,e){t.exports=e()}(void 0,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n){function e(t){return t instanceof Object?t instanceof Array?"array":"object":N(t)?"empty":"text"}function r(){}function i(){this.map=new r}function a(t,n){A(t),n.removeChild(t.$n)}function o(t,n,e){for(;e<t.length;)a(t[e++],n)}function s(t,n){for(var e=0;e<t.length;)A(t[e++]);n.textContent=""}function u(t,n){return t.$s===n.$s&&(n.$s.u(n,t),!0)}function c(t,n,e,r){null===r?l(t,n,e):d(t,n,e,r)}function d(t,n,e,r){for(;e<n.length;)t.insertBefore((n[e]=P(n[e])).$n,r),++e}function l(t,n,e){for(;e<n.length;)t.appendChild((n[e]=P(n[e])).$n),++e}function f(t,n,e){var r=document.createDocumentFragment(),i=$(t,r,n);return T(e,r),i}function h(t,n,e,r){for(var i=0;i<n.length&&i<e.length;i++)n[i]=D(e[i],n[i]);i<n.length?c(t,n,i,r):o(e,t,i)}function p(t,n,e){e.length?n.length?h(t,n,e,null):s(e,t):l(t,n,0)}function m(t,n,e,r){return t instanceof Array?(e?p(n,t,r):h(n.parentNode,t,r,n),n):e?(s(r,n),$(!0,n,t)):(o(r,n.parentNode,0),f(!1,t,n))}function v(t,n,e){return t instanceof Object?f(e,t,n):(n.nodeValue=N(t)?"":t,n)}function y(t,n,e,r){var i=void 0;return t&&u(i=r.$r||r,t)?(t.$r=i,n):f(e,t,n)}function g(t,n,e,i){this._boundActions=new r,this._parentInst=e,this.actions=i,this.props=n,this.render=t,this.bindSend=this.bindSend.bind(this),this.state=i.onInit(this),this.$n=M(this._instance=t(this))}function x(t,n,e,r){return new g(t,n,e,r)}function b(t,n){var e=t(n);return M(e),e}function w(t,n,e,r){var i=(n?x:b)(t,e||F,r,n);return i}function C(t,n,e,r){var i=n?r.updateProps(e):D(r,t(e));return i}function M(t){var n=t.$s.c(t);return t.$n=n,n.xvdom=t,n}function P(t){var n=t.$s,e=n.r.pop(t.key);return e?(n.u(t,e),e):(M(t),t)}function $(t,n,r){return O[e(r)](n,r,t)}function _(t,n,r,i){return q[e(n)](r,i,t,n)}function D(t,n){return u(t,n)?t:(T(t.$n,(n=P(n)).$n),A(t),n)}n.__esModule=!0,n.createComponent=w;var N=function(t){return null==t||t===!0||t===!1},F={},S=n.DEADPOOL={push:function(){},pop:function(){}};r.prototype=Object.create(null),i.prototype.push=function(t){var n=t.key,e=this.map;t.$x=e[n],e[n]=t},i.prototype.pop=function(t){var n=this.map[t];if(n)return this.map[t]=n.$x,n};var A=function(t){t.$s.r.push(t)},E=function(t){return document.createTextNode(t)},T=function(t,n){var e=t.parentNode;e&&e.replaceChild(n,t)};g.prototype.updateProps=function(t){var n=this.props;return this.props=t,this.actions.onProps?this.send("onProps",n):this.rerender(),this},g.prototype.bindSend=function(t){return this._boundActions[t]||(this._boundActions[t]=this.send.bind(this,t))},g.prototype.send=function(t,n){var e=void 0,r=this.actions[t];r&&(e=r(this,n))!=this.state&&(this.state=e,this.rerender())},g.prototype.rerender=function(){var t=D(this._instance,this.render(this));this._instance=t,t.$n.xvdom=this._parentInst};var O={text:function(t,n){return t.appendChild(E(n))},empty:function(t){return t.appendChild(E(""))},object:function(t,n){return t.appendChild(M(n))},array:function(t,n,e){return l(t,n,0),e?t:t.appendChild(E(""))}},q={text:v,object:y,array:m,empty:v},L=n.render=function(t){return P(t).$n},R=n.rerender=function(t,n){return D(t.xvdom,n).$n},j=n.unmount=function(t){a(t.xvdom,t.parentNode)};n.default={createComponent:w,createDynamic:$,el:function(t){return document.createElement(t)},render:L,rerender:R,unmount:j,updateComponent:C,updateDynamic:_,Pool:i,DEADPOOL:S},n._={rerenderText:v,rerenderDynamic:f}}])})},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=n.Query=function(){function t(n,r){e(this,t),this.elapsed=n,this.query=r}return t.rand=function(){var n=15*Math.random(),e=void 0;return e=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something",new t(n,e)},t}(),i=new r(0,""),a=0,o=n.DB=function(){function t(n){e(this,t),this.id=a++,this.name=n,this.queries=null,this.update()}return t.prototype.update=function(){for(var t=[],n=Math.floor(10*Math.random()+1),e=0;e<n;e++)t.push(r.rand());this.queries=t},t.prototype.getTopFiveQueries=function(){var t=this.queries.slice();for(t.sort(function(t,n){return t.elapsed-n.elapsed}),t=t.slice(0,5);t.length<5;)t.push(i);return t},t}();n.DatabaseList=function(){function t(n){e(this,t),this.dbs=[];for(var r=0;r<n;r++)this.dbs.push(new o("cluster"+r)),this.dbs.push(new o("cluster"+r+"slave"))}return t.prototype.update=function(){for(var t=this.dbs,n=0;n<t.length;n++)t[n]=new o(t[n].name)},t.prototype.randomUpdate=function(t){for(var n=this.dbs,e=0;e<n.length;e++)Math.random()<t&&(n[e]=new o(n[e].name))},t}()}]);
