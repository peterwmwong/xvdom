!function(t){function n(a){if(e[a])return e[a].exports;var r=e[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=e(2),i=e(3),o=a(i),s=e(4),u=o.default.createDynamic,c=o.default.el,l=o.default.updateDynamic,d={c:function(t){var n,e=c("table");return e.className="table table-striped latest-data",n=c("tbody"),n.appendChild(t.b=u(!0,n,t.a)),e.appendChild(n),e},u:function(t,n){t.a!==n.a&&(n.b=l(!0,n.a,n.a=t.a,n.b))},r:o.default.DEADPOOL},f={c:function(t){var n,e,a=c("tr");return n=c("td"),n.className="dbname",n.appendChild(t.b=u(!0,n,t.a)),a.appendChild(n),n=c("td"),n.className="query-count",e=c("span"),t.d=e,e.className=t.c,e.appendChild(t.f=u(!0,e,t.e)),n.appendChild(e),a.appendChild(n),a.appendChild(t.h=u(!1,a,t.g)),a},u:function(t,n){var e;t.a!==n.a&&(n.b=l(!0,n.a,n.a=t.a,n.b)),e=t.c,e!==n.c&&(n.d.className=e,n.c=e),t.e!==n.e&&(n.f=l(!0,n.e,n.e=t.e,n.f)),t.g!==n.g&&(n.h=l(!1,n.g,n.g=t.g,n.h))},r:o.default.DEADPOOL},p={c:function(t){var n,e,a=c("td");return t.b=a,a.className=t.a,a.appendChild(t.d=u(!1,a,t.c)),n=c("div"),n.className="popover left",e=c("div"),e.className="popover-content",e.appendChild(t.f=u(!0,e,t.e)),n.appendChild(e),e=c("div"),e.className="arrow",n.appendChild(e),a.appendChild(n),a},u:function(t,n){var e;e=t.a,e!==n.a&&(n.b.className=e,n.a=e),t.c!==n.c&&(n.d=l(!1,n.c,n.c=t.c,n.d)),t.e!==n.e&&(n.f=l(!0,n.e,n.e=t.e,n.f))},r:o.default.DEADPOOL},h=.5,m=new s.DatabaseList(50),v=function(t){return t.toFixed(2)},x=function(t){return t>=20?"label label-important":t>=10?"label label-warning":"label label-success"},g=function(t){return t>=20?"Query elapsed warn_long":t>=10?"Query elapsed warn":"Query elapsed short"},y=function(t,n){for(var e=t.length,a=new Array(e),r=0;r<e;)a[r]=n(t[r],r),++r;return a},b=function(t,n){var e=t.elapsed,a=t.query;return{$s:p,a:g(e),c:v(e),e:a,key:n}},w=function(t,n){var e=t.queries.length;return{$s:f,a:t.name,c:x(e),e:e,g:y(t.getTopFiveQueries(),b),key:n}},C=function(t){return{$s:d,a:y(t,w)}},M=void 0;(0,r.startFPSMonitor)(),(0,r.initProfiler)("data"),(0,r.initProfiler)("view");var $=function t(){(0,r.startProfile)("data"),m.randomUpdate(h),(0,r.endProfile)("data"),(0,r.startProfile)("view"),o.default.rerender(M,C(m.dbs)),(0,r.endProfile)("view"),requestAnimationFrame(t)};window.app.appendChild(M=o.default.render(C(m.dbs))),requestAnimationFrame($)},function(t,n){"use strict";function e(t){p||(t.container&&(f=t.container),p=!0)}function a(){f||(f=document.createElement("div"),f.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(f)),p=!0}function r(t){h.push(t),m===-1&&requestAnimationFrame(function(t){m=-1;var n=h;h=[];for(var e=0;e<n.length;e++)n[e]()})}function i(){function t(a){var o=(a-(0===i?a:i))/1e3,s=1/o;if(s!==1/0){64===r.length&&r.shift(),r.push(s);for(var u=0,c=0;c<r.length;c++)u+=r[c];var l=u/r.length;n.addSample(l),e.addResult(n.calc())}i=a,requestAnimationFrame(t)}a();var n=new x,e=new g("FPS","",39);f.appendChild(e.element);var r=[],i=0;requestAnimationFrame(t)}function o(){if(a(),void 0!==performance.memory){var t,n,e;!function(){var a=function a(){t.addSample(Math.round(e.usedJSHeapSize/1048576)),n.addResult(t.calc()),setTimeout(a,30)};t=new x,n=new g("Memory","MB",5),f.appendChild(n.element),e=performance.memory,a()}()}}function s(t){var n=b[t];void 0!==n&&(n.startTime=performance.now())}function u(t){var n=performance.now(),e=b[t];void 0!==e&&(e.data.addSample(n-e.startTime),e.widget.addResult(e.data.calc()))}function c(t){a();var n=b[t];void 0===n&&(b[t]=n=new y(t,"ms"),f.appendChild(n.widget.element))}var l=30,d=100,f=null,p=!1,h=[],m=-1;n.initPerfMonitor=e;var v=function(){function t(t,n,e,a){this.min=t,this.max=n,this.mean=e,this.now=a}return t}(),x=function(){function t(){this.samples=[],this.maxSamples=d}return t.prototype.addSample=function(t){this.samples.length===this.maxSamples&&this.samples.shift(),this.samples.push(t)},t.prototype.calc=function(){for(var t=this.samples[0],n=this.samples[0],e=0,a=0;a<this.samples.length;a++){var r=this.samples[a];r<t&&(t=r),r>n&&(n=r),e+=r}var i=this.samples[this.samples.length-1],o=e/this.samples.length;return new v(t,n,o,i)},t}(),g=function(){function t(t,n,e){var a=this;void 0===e&&(e=0),this._syncView=function(){var t=a.results[a.results.length-1],n=l/(1.2*t.max),e=0===(32&a.flags)?t.min.toFixed(2):""+Math.round(t.min),r=0===(32&a.flags)?t.max.toFixed(2):""+Math.round(t.max),i=0===(32&a.flags)?t.mean.toFixed(2):""+Math.round(t.mean),o=0===(32&a.flags)?t.now.toFixed(2):""+Math.round(t.now);if(a.text.innerHTML=""+(0===(1&a.flags)?"<div>min: &nbsp;"+e+a.unitName+"</div>":"")+(0===(2&a.flags)?"<div>max: &nbsp;"+r+a.unitName+"</div>":"")+(0===(4&a.flags)?"<div>mean: "+i+a.unitName+"</div>":"")+(0===(8&a.flags)?"<div>now: &nbsp;"+o+a.unitName+"</div>":""),0===(16&a.flags)){a.ctx.fillStyle="#010",a.ctx.fillRect(0,0,d,l),a.ctx.fillStyle="#0f0";for(var s=0;s<a.results.length;s++)a.ctx.fillRect(s,l,1,-(a.results[s].now*n))}a._dirty=!1},this.name=t,this.unitName=n,this.flags=e,this.results=[],this.element=document.createElement("div"),this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0",this.label=document.createElement("div"),this.label.style.cssText="text-align: center",this.label.textContent=this.name,this.text=document.createElement("div"),this.element.appendChild(this.label),this.element.appendChild(this.text),0===(16&e)?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=d,this.canvas.height=l,this.ctx=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):(this.canvas=null,this.ctx=null),this._dirty=!1}return t.prototype.addResult=function(t){this.results.length===d&&this.results.shift(),this.results.push(t),this.invalidate()},t.prototype.invalidate=function(){this._dirty||(this._dirty=!0,r(this._syncView))},t}();n.startFPSMonitor=i,n.startMemMonitor=o;var y=function(){function t(t,n){this.data=new x,this.widget=new g(t,n),this.startTime=0}return t}(),b={};n.startProfile=s,n.endProfile=u,n.initProfiler=c},function(t,n,e){"use strict";!function(n,e){t.exports=e()}(void 0,function(){return function(t){function n(a){if(e[a])return e[a].exports;var r=e[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(1)},function(t,n){function e(t){return t instanceof Object?t instanceof Array?"array":"object":T(t)?"empty":"text"}function a(){}function r(){this.map=new a}function i(t,n){q(t),n.removeChild(t.$n)}function o(t,n,e){for(;e<t.length;)i(t[e++],n)}function s(t,n){for(var e=0;e<t.length;)q(t[e++]);n.textContent=""}function u(t,n){return t.$s===n.$s&&(n.$s.u(n,t),!0)}function c(t,n,e,a){null==a?d(t,n,e):l(t,n,e,a)}function l(t,n,e,a){for(;e<n.length;)t.insertBefore((n[e]=_(n[e])).$n,a),++e}function d(t,n,e){for(;e<n.length;)t.appendChild((n[e]=_(n[e])).$n),++e}function f(t,n,e,a,r,i){var s=0,u=0;do n[u]=S(a[s],n[u]),++u,++s;while(s<r&&u<e);u<e?c(t,n,u,i):o(a,t,s)}function p(t,n,e){var a=t.parentNode,r=n.length,i=e.length;r?i?f(a,n,r,e,i,t):c(a,n,0,t):o(e,a,0)}function h(t,n,e){var a=n.length,r=e.length;a?r?f(t,n,a,e,r,null):d(t,n,0):s(e,t)}function m(t,n,e){var a=F(t,e.parentNode,n);return j(e,a),a}function v(t,n,e){return t instanceof Object?m(e,t,n):(n.nodeValue=T(t)?"":t,n)}function x(t,n,e,a){var r=void 0;return t&&u(r=a.$r||a,t)?(t.$r=r,n):m(e,t,n)}function g(t,n,e,a){var r=n.xvdomContext;return t instanceof Array?(e?h(r,t,a):p(r,t,a),n):e?(s(a,r),r.appendChild(F(!0,r,t))):(o(a,r.parentNode,0),m(!1,t,r))}function y(t,n,e,a){var r=a.props;a.props=e,n.onProps?C(t,a,n.onProps,r):w(t,a)}function b(t,n,e){var a=document.createDocumentFragment();return d(a,t,0),a.xvdomContext=e?n:a.appendChild(L("")),a}function w(t,n){var e=S(n._instance,t(n));n._instance=e,e.$n.xvdom=n._parentInst}function C(t,n,e,a){if(e){var r=e(n,a);r!==n.state&&(n.state=r,w(t,n))}}function M(t,n,e,r){var i=new a,o={props:n,bindSend:function(n){return i[n]||(i[n]=function(e){C(t,o,r[n],e)})},_parentInst:e};return o.state=r.onInit(o),o.$n=D(o._instance=t(o)),o}function $(t,n){var e=t(n);return D(e),e}function N(t,n,e,a){return(n?M:$)(t,e||O,a,n)}function P(t,n,e,a){return n?(y(t,n,e,a),a):S(a,t(e))}function D(t){var n=t.$s.c(t);return t.$n=n,n.xvdom=t,n}function _(t){var n=t.$s,e=n.r.pop(t.key);return e?(n.u(t,e),e):(D(t),t)}function F(t,n,a){return k[e(a)](a,n,t)}function E(t,n,a,r){return Q[e(n)](a,r,t,n)}function S(t,n){return u(t,n)?t:(j(t.$n,(n=_(n)).$n),q(t),n)}n.__esModule=!0,n.createComponent=N;var T=function(t){return null==t||t===!0||t===!1};a.prototype=Object.create(null);var O=new a,A=n.DEADPOOL={push:function(){},pop:function(){}};r.prototype.push=function(t){var n=t.key,e=this.map;t.$x=e[n],e[n]=t},r.prototype.pop=function(t){var n=this.map[t];if(n)return this.map[t]=n.$x,n};var q=function(t){t.$s.r.push(t)},L=function(t){return document.createTextNode(t)},R=function(){return L("")},j=function(t,n){var e=t.parentNode;e&&e.replaceChild(n,t)},k={text:L,object:D,array:b,empty:R},Q={text:v,object:x,array:g,empty:v},I=n.render=function(t){return _(t).$n},B=n.rerender=function(t,n){return S(t.xvdom,n).$n},V=n.unmount=function(t){i(t.xvdom,t.parentNode)};n.default={createComponent:N,createDynamic:F,el:function(t){return document.createElement(t)},render:I,rerender:B,unmount:V,updateComponent:P,updateDynamic:E,Pool:r,DEADPOOL:A},n._={rerenderText:v,rerenderDynamic:m}}])})},function(t,n){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var a=n.Query=function(){function t(n,a){e(this,t),this.elapsed=n,this.query=a}return t.rand=function(){var n=15*Math.random(),e=void 0;return e=Math.random()<.1?"vacuum":Math.random()<.2?"<IDLE> in transaction":"SELECT blah FROM something",new t(n,e)},t}(),r=new a(0,""),i=0,o=n.DB=function(){function t(n){e(this,t),this.id=i++,this.name=n,this.queries=null,this.update()}return t.prototype.update=function(){for(var t=[],n=Math.floor(10*Math.random()+1),e=0;e<n;e++)t.push(a.rand());this.queries=t},t.prototype.getTopFiveQueries=function(){var t=this.queries.slice();for(t.sort(function(t,n){return t.elapsed-n.elapsed}),t=t.slice(0,5);t.length<5;)t.push(r);return t},t}();n.DatabaseList=function(){function t(n){e(this,t),this.dbs=[];for(var a=0;a<n;a++)this.dbs.push(new o("cluster"+a)),this.dbs.push(new o("cluster"+a+"slave"))}return t.prototype.update=function(){for(var t=this.dbs,n=0;n<t.length;n++)t[n]=new o(t[n].name)},t.prototype.randomUpdate=function(t){for(var n=this.dbs,e=0;e<n.length;e++)Math.random()<t&&(n[e]=new o(n[e].name))},t}()}]);
